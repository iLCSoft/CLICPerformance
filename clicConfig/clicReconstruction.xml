<?xml version="1.0" encoding="us-ascii"?>
<marlin xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ilcsoft.desy.de/marlin/marlin.xsd">
  <constants>
    <!-- Chose which BeamCalReco processor to run 380GeV or 3TeV -->
    <constant name="BCReco" value="3TeV" />
  </constants>
  <execute>

    <!-- ========== setup  ========== -->
    <processor name="MyAIDAProcessor"/>
    <processor name="EventNumber" />
    <processor name="InitDD4hep"/>
    <processor name="Config" />


    <if condition="Config.OverlayFalse">
      <processor name="OverlayFalse"/>
    </if>

    <if condition="Config.Overlay350GeV_CDR">
      <processor name="Overlay350GeV_CDR"/>
    </if>

    <if condition="Config.Overlay350GeV">
      <processor name="Overlay350GeV"/>
    </if>

    <if condition="Config.Overlay350GeV_L6">
      <processor name="Overlay350GeV_L6"/>
    </if>

    <if condition="Config.Overlay380GeV_CDR">
      <processor name="Overlay380GeV_CDR"/>
    </if>

    <if condition="Config.Overlay380GeV">
      <processor name="Overlay380GeV"/>
    </if>

    <if condition="Config.Overlay380GeV_L6">
      <processor name="Overlay380GeV_L6"/>
    </if>

    <if condition="Config.Overlay500GeV">
      <processor name="Overlay500GeV"/>
    </if>

    <if condition="Config.Overlay1.4TeV">
      <processor name="Overlay1.4TeV"/>
    </if>

    <if condition="Config.Overlay3TeV">
      <processor name="Overlay3TeV"/>
    </if>

    <if condition="Config.Overlay3TeV_L6">
      <processor name="Overlay3TeV_L6"/>
    </if>

    <!-- ========== digitisation  ========== -->
    <processor name="VXDBarrelDigitiser"/>
    <processor name="VXDEndcapDigitiser"/>
    <processor name="InnerPlanarDigiProcessor"/>
    <processor name="InnerEndcapPlanarDigiProcessor"/>
    <processor name="OuterPlanarDigiProcessor"/>
    <processor name="OuterEndcapPlanarDigiProcessor"/>

    <!-- ========== tracking  ========== -->
    <!-- At the moment the name of the final track collection for the MyTruthTrackFinder and MyExtrToTracker processors is the same, so that users can use this example to run easily both the cheater track pattern recognition (still the default for many tasks) or the real one (under final tests) -->
    <if condition="Config.TrackingTruth">
      <processor name="MyTruthTrackFinder"/>
    </if>
    <if condition="Config.TrackingConformal">
      <processor name="MyConformalTracking"/>
      <processor name="ClonesAndSplitTracksFinder"/>
    </if>

    <processor name="Refit" />

    <!-- === calorimeter digitization and pandora reco === -->
    <processor name="MyDDCaloDigi"/>
    <processor name="MyDDSimpleMuonDigi"/> 
    <processor name="MyDDMarlinPandora"/> 
    <processor name="LumiCalReco"/>
    <!-- FIXME: When new Marlin in in more widespread use?? -->
    <!-- <processor name="BeamCalReco${BCReco}"/> -->
    <if condition="Config.BeamCal3TeV">
      <processor name="BeamCalReco3TeV"/>
    </if>
    <if condition="Config.BeamCal380GeV">
      <processor name="BeamCalReco380GeV"/>
    </if>

    <group name="MergeCollections" />

    <!-- ========== monitoring  ========== -->
    <processor name="MyClicEfficiencyCalculator"/>
    <processor name="MyRecoMCTruthLinker"/>
    <processor name="MyTrackChecker"/>
    <Xprocessor name="MyHitResiduals"/> <!-- please uncomment the use of this processor only if needed -->

    <!-- === PFO Selector === -->
    <group name="PfoSelector" />

    <!-- ========== vertexing and jet clustering========== -->

    <if condition="Config.OverlayFalse">
      <processor name="RenameCollection"/>
    </if>

    <if condition="Config.OverlayNotFalse">
      <processor name="MyFastJetProcessor"/>
    </if>

    <processor name="VertexFinder"/>
    <processor name="JetClusteringAndRefiner"/>

    <if condition="Config.VertexUnconstrainedON">
      <processor name="VertexFinderUnconstrained"/>
    </if>


    <!-- ========== output  ========== -->

    <processor name="Output_REC"/>
    <processor name="Output_DST"/>

  </execute>


  <global>
    <parameter name="LCIOInputFiles">
      /eos/experiment/clicdp/grid/ilc/user/w/webermat/ddsimstdhep/ILC17-11-09_gcc62_CLIC_o3_v13/Zuds3000_split100/ddsim_ILC171109_gcc62_Zuds3000_CLIC_o3_v13_00_0.slcio
    </parameter>
    <!-- Limit the number of processed records (run+evt): -->
    <parameter name="MaxRecordNumber" value="-1" />
    <parameter name="SkipNEvents" value="0" />
    <parameter name="SupressCheck" value="false" />  
    <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> WARNING  </parameter>
    <parameter name="RandomSeed" value="1234567890" />
  </global>


  <processor name="InitDD4hep" type="InitializeDD4hep">
    <!--InitializeDD4hep reads a compact xml file and initializes the DD4hep::LCDD object-->
    <!--Name of the DD4hep compact xml file to load-->
    <parameter name="EncodingStringParameter"> GlobalTrackerReadoutID </parameter>
    <parameter name="DD4hepXMLFile" type="string">
      /cvmfs/clicdp.cern.ch/iLCSoft/builds/nightly/x86_64-slc6-gcc62-opt/lcgeo/HEAD/CLIC/compact/CLIC_o3_v13/CLIC_o3_v13.xml
    </parameter>
  </processor>

  <processor name="Config" type="CLICRecoConfig" >
    <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> MESSAGE  </parameter>
    <!--Which option to use for BeamCal: 3TeV, 380GeV. Then use, e.g., Config.BeamCal3TeV in the condition-->
    <parameter name="BeamCal" type="string">3TeV </parameter>
    <!--Possible values and conditions for option BeamCal-->
    <parameter name="BeamCalChoices" type="StringVec">3TeV 380GeV  </parameter>
    <!--Which option to use for Overlay: False, 350GeV, 380GeV, 420GeV, 500GeV, 1.4TeV, 3TeV. Then use, e.g., Config.OverlayFalse in the condition-->
    <parameter name="Overlay" type="string">False </parameter>
    <!--Possible values and conditions for option Overlay-->
    <parameter name="OverlayChoices" type="StringVec">False 350GeV_CDR 350GeV 350GeV_L6 380GeV 380GeV_CDR 380GeV_L6 420GeV 500GeV 1.4TeV 3TeV 3TeV_L6 </parameter>
    <!--Which option to use for Tracking: Truth, ConformalPlusExtrapolator, Conformal. Then use, e.g., Config.TrackingTruth in the condition-->
    <parameter name="Tracking" type="string">Conformal </parameter>
    <!--Possible values and conditions for option Tracking-->
    <parameter name="TrackingChoices" type="StringVec">Truth  Conformal  </parameter>
    <!--Which option to use for VertexUnconstrained: ON, OFF. Then use, e.g., Config.VertexUnconstrainedOFF in the condition-->
    <parameter name="VertexUnconstrained" type="string">OFF </parameter>
    <!--Possible values and conditions for option Tracking-->
    <parameter name="VertexUnconstrainedChoices" type="StringVec">ON OFF  </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  </processor>

  <group name="Overlay">
    <parameter name="MCParticleCollectionName" type="string">MCParticle </parameter>
    <!--The output MC Particle Collection Name for the physics event-->
    <parameter name="MCPhysicsParticleCollectionName" type="string"> MCPhysicsParticles </parameter>
    <!--Time difference between bunches in the bunch train in ns-->
    <parameter name="Delta_t" type="float" value="0.5"/>
    <!--Number of bunches in a bunch train-->
    <parameter name="NBunchtrain" type="int" value="30"/>

    <parameter name="Collection_IntegrationTimes" type="StringVec" >
      VertexBarrelCollection        10
      VertexEndcapCollection        10

      InnerTrackerBarrelCollection  10
      InnerTrackerEndcapCollection  10

      OuterTrackerBarrelCollection  10
      OuterTrackerEndcapCollection  10

      ECalBarrelCollection          10
      ECalEndcapCollection          10
      ECalPlugCollection            10

      HCalBarrelCollection          10
      HCalEndcapCollection          10
      HCalRingCollection            10

      YokeBarrelCollection          10
      YokeEndcapCollection          10

      LumiCalCollection             10
      BeamCalCollection             10
    </parameter>
    <!--Number of the Bunch crossing of the physics event-->
    <parameter name="PhysicsBX" type="int" value="10"/>
    <!--Draw random number of Events to overlay from Poisson distribution with  mean value NumberBackground-->
    <parameter name="Poisson_random_NOverlay" type="bool" value="true"/>
    <!--Place the physics event at an random position in the train - overrides PhysicsBX-->
    <parameter name="RandomBx" type="bool" value="false"/>
    <!--[mm/ns] (float) - default 5.0e-2 (5cm/us)-->
    <parameter name="TPCDriftvelocity" type="float" value="0.05"/>
    <parameter name="BackgroundFileNames" type="StringVec">
      gghad_01.slcio
      gghad_02.slcio
    </parameter>

      <processor name="OverlayFalse" type="OverlayTimingGeneric">
        <parameter name="BackgroundFileNames" type="StringVec"> </parameter>
        <parameter name="NBunchtrain" type="int" value="0"/>
        <parameter name="NumberBackground" type="float" value="0."/>
      </processor>

      <processor name="Overlay350GeV_CDR" type="OverlayTimingGeneric">
        <!-- Overlay parameters for CDR studies, from scaled 500 GeV machine -->
        <parameter name="NumberBackground" type="float" value="0.0464"/>
      </processor>

      <processor name="Overlay350GeV" type="OverlayTimingGeneric">
        <!-- Overlay parameters for L*=4.3m  -->
        <parameter name="NumberBackground" type="float" value="0.16"/>
      </processor>

      <processor name="Overlay350GeV_L6" type="OverlayTimingGeneric">
        <!-- Overlay parameters for L*=6m option -->
        <parameter name="NumberBackground" type="float" value="0.14"/>
      </processor>

      <processor name="Overlay380GeV_CDR" type="OverlayTimingGeneric">
        <!-- Overlay parameters for CDR studies, from scaled 500 GeV machine -->
        <parameter name="NumberBackground" type="float" value="0.0464"/>
      </processor>

      <processor name="Overlay380GeV" type="OverlayTimingGeneric">
        <!-- Overlay parameters for L*=4.3m -->
        <parameter name="NumberBackground" type="float" value="0.18"/>
      </processor>

      <processor name="Overlay380GeV_L6" type="OverlayTimingGeneric">
        <!-- Overlay parameters for L*=6m option -->
        <parameter name="NumberBackground" type="float" value="0.178"/>
      </processor>

      <processor name="Overlay420GeV" type="OverlayTimingGeneric">
        <parameter name="NumberBackground" type="float" value="0.17"/>
      </processor>

      <processor name="Overlay500GeV" type="OverlayTimingGeneric">
        <parameter name="NumberBackground" type="float" value="0.3"/>
      </processor>

      <processor name="Overlay1.4TeV" type="OverlayTimingGeneric">
        <parameter name="NumberBackground" type="float" value="1.3"/>
      </processor>

      <processor name="Overlay3TeV" type="OverlayTimingGeneric">
        <parameter name="NumberBackground" type="float" value="3.2"/>
      </processor>

      <processor name="Overlay3TeV_L6" type="OverlayTimingGeneric">
        <!-- Overlay parameters for L*=6m option: http://clic-beam-beam.web.cern.ch/clic-beam-beam/3tev_l6.html -->
        <parameter name="NumberBackground" type="float" value="3.12"/>
      </processor>

  </group>

  <processor name="VXDBarrelDigitiser" type="DDPlanarDigiProcessor">
    <parameter name="SubDetectorName" type="string">Vertex </parameter>
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool">false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.003 0.003 0.003 0.003 0.003 0.003 </parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.003 0.003 0.003 0.003 0.003 0.003  </parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">VertexBarrelCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">VXDTrackerHitRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">VXDTrackerHits </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">WARNING </parameter>
  </processor>

  <processor name="VXDEndcapDigitiser" type="DDPlanarDigiProcessor">
    <parameter name="SubDetectorName" type="string">Vertex </parameter>
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool">false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.003 0.003 0.003 0.003 0.003 0.003 </parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.003 0.003 0.003 0.003 0.003 0.003  </parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">VertexEndcapCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">VXDEndcapTrackerHitRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">VXDEndcapTrackerHits </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">WARNING </parameter>
  </processor>


  <processor name="InnerPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <parameter name="SubDetectorName" type="string"> InnerTrackers </parameter>
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool"> false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float">0.007 </parameter> <!-- when only one number is provided, the hits in all the layers wll be smeared with the same resolution => it works for both CLIC_o2_v04 with 2 layers and CLIC_o3_v5 with 3 layers  -->
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float">0.09 </parameter> <!-- when only one number is provided, the hits in all the layers wll be smeared with the same resolution => it works for both CLIC_o2_v04 with 2 layers and CLIC_o3_v5 with 3 layers  --> 
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit"> InnerTrackerBarrelCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">InnerTrackerBarrelHitsRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">ITrackerHits </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">WARNING </parameter>
  </processor>

  <processor name="InnerEndcapPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <parameter name="SubDetectorName" type="string"> InnerTrackers </parameter>
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool"> false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.005 0.007 0.007 0.007 0.007 0.007 0.007</parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.005 0.09 0.09 0.09 0.09 0.09 0.09</parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit"> InnerTrackerEndcapCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">InnerTrackerEndcapHitsRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">ITrackerEndcapHits </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">WARNING </parameter>
  </processor>

  <processor name="OuterPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <parameter name="SubDetectorName" type="string"> OuterTrackers </parameter>
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool"> false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.007 0.007 0.007</parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.09 0.09 0.09 </parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">OuterTrackerBarrelCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">OuterTrackerBarrelHitsRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">OTrackerHits </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">WARNING </parameter>
  </processor>

  <processor name="OuterEndcapPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <parameter name="SubDetectorName" type="string"> OuterTrackers </parameter>
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool"> false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.007 0.007 0.007 0.007 0.007 </parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.09 0.09 0.09 0.09 0.09 </parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">OuterTrackerEndcapCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">OuterTrackerEndcapHitsRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">OTrackerEndcapHits </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">WARNING </parameter>
  </processor>

  <!-- == TruthTrackFinder parameters == -->
  <processor name="MyTruthTrackFinder" type="TruthTrackFinder">
    <parameter name="FitForward" type="bool">true</parameter>
    <!--Define input tracker hits and relations. NB. Order must be respected -->
    <parameter name="TrackerHitCollectionNames" type="StringVec" lcioInType="TrackerHitPlane">
      VXDTrackerHits
      ITrackerHits
      OTrackerHits
      VXDEndcapTrackerHits
      ITrackerEndcapHits
      OTrackerEndcapHits
    </parameter>
    <parameter name="SimTrackerHitRelCollectionNames" type="StringVec" lcioInType="LCRelation">
      VXDTrackerHitRelations
      InnerTrackerBarrelHitsRelations
      OuterTrackerBarrelHitsRelations
      VXDEndcapTrackerHitRelations
      InnerTrackerEndcapHitsRelations
      OuterTrackerEndcapHitsRelations
    </parameter>

    <!--Name of the MCParticle input collection-->
    <parameter name="MCParticleCollectionName" type="string" lcioInType="MCParticle">MCParticle </parameter>
    <!--Silicon track Collection Name-->
    <parameter name="SiTrackCollectionName" type="string" lcioOutType="Track">SiTracks </parameter>
    <!--Silicon track particle relation Collection Name-->
    <parameter name="SiTrackRelationCollectionName" type="string" lcioOutType="LCRelation">SiTrackRelations </parameter>
    <!--If true use the truth information to initialise the helical prefit, otherwise use prefit by fitting 3 hits-->
    <parameter name="UseTruthInPrefit" type="bool">false </parameter>

    <parameter name="Verbosity" type="string">WARNING </parameter>
  </processor>

  <!-- == Pattern recognition parameters == -->
  <processor name="MyConformalTracking" type="ConformalTrackingV2">
    <!--ConformalTracking constructs tracks using a combined conformal mapping and cellular automaton approach.-->

    <!--Name of the TrackerHit input collections-->
    <parameter name="TrackerHitCollectionNames" type="StringVec" lcioInType="TrackerHitPlane"> VXDTrackerHits VXDEndcapTrackerHits ITrackerHits OTrackerHits ITrackerEndcapHits OTrackerEndcapHits </parameter>
    <!--Name of the MCParticle input collection-->
    <parameter name="MCParticleCollectionName" type="string" lcioInType="MCParticle">MCParticle </parameter>
    <!--Name of the TrackerHit relation collections-->
    <parameter name="RelationsNames" type="StringVec" lcioInType="LCRelation"> VXDTrackerHitRelations VXDEndcapTrackerHitRelations InnerTrackerBarrelHitsRelations OuterTrackerBarrelHitsRelations InnerTrackerEndcapHitsRelations OuterTrackerEndcapHitsRelations </parameter>
    <!--Silicon track Collection Name-->
    <parameter name="SiTrackCollectionName" type="string" lcioOutType="Track">SiTracksCT </parameter>
    <!--Debug hits Collection Name-->
    <parameter name="DebugHits" type="string" lcioOutType="TrackerHitPlane"> DebugHits </parameter>
    <!--Maximum number of track hits to try the inverted fit-->
    <parameter name="MaxHitInvertedFit" type="int">0 </parameter>
    <!--Final minimum number of track clusters-->
    <parameter name="MinClustersOnTrackAfterFit" type="int">4 </parameter>

    <!--enable debug plots -->
    <parameter name="DebugPlots" type="bool"> false </parameter>
    <!--retry with tightened parameters, when too many tracks are being created-->
    <parameter name="RetryTooManyTracks" type="bool">false </parameter>
    <!--sort results from kdtree search-->
    <parameter name="SortTreeResults" type="bool">true </parameter>

    <!--steps for the pattern recognition-->
    <parameter name="Steps" type="StringVec"> 
      [VXDBarrel]
      @Collections : VXDTrackerHits
      @Parameters : MaxCellAngle : 0.005; MaxCellAngleRZ : 0.005; Chi2Cut : 100; MinClustersOnTrack : 4; MaxDistance : 0.02; HighPTCut: 10.0;
      @Flags : HighPTFit, VertexToTracker
      @Functions : CombineCollections, BuildNewTracks
      [VXDEncap]
      @Collections : VXDEndcapTrackerHits
      @Parameters : MaxCellAngle : 0.005; MaxCellAngleRZ : 0.005; Chi2Cut : 100; MinClustersOnTrack : 4; MaxDistance : 0.02; HighPTCut: 10.0;
      @Flags : HighPTFit, VertexToTracker
      @Functions : CombineCollections, ExtendTracks
      [LowerCellAngle1]
      @Collections : VXDTrackerHits, VXDEndcapTrackerHits
      @Parameters : MaxCellAngle : 0.025; MaxCellAngleRZ : 0.025; Chi2Cut : 100; MinClustersOnTrack : 4; MaxDistance : 0.02; HighPTCut: 10.0;
      @Flags : HighPTFit, VertexToTracker, RadialSearch
      @Functions : CombineCollections, BuildNewTracks
      [LowerCellAngle2]
      @Collections :
      @Parameters : MaxCellAngle : 0.05; MaxCellAngleRZ : 0.05; Chi2Cut : 2000; MinClustersOnTrack : 4; MaxDistance : 0.02; HighPTCut: 10.0;
      @Flags : HighPTFit, VertexToTracker, RadialSearch
      @Functions : BuildNewTracks, SortTracks
      [Tracker]
      @Collections : ITrackerHits, OTrackerHits, ITrackerEndcapHits, OTrackerEndcapHits
      @Parameters : MaxCellAngle : 0.05; MaxCellAngleRZ : 0.05; Chi2Cut : 2000; MinClustersOnTrack : 4; MaxDistance : 0.02; HighPTCut: 1.0;
      @Flags : HighPTFit, VertexToTracker, RadialSearch
      @Functions : CombineCollections, ExtendTracks
      [Displaced]
      @Collections : VXDTrackerHits, VXDEndcapTrackerHits, ITrackerHits, OTrackerHits, ITrackerEndcapHits, OTrackerEndcapHits
      @Parameters : MaxCellAngle : 0.05; MaxCellAngleRZ : 0.05; Chi2Cut : 1000; MinClustersOnTrack : 5; MaxDistance : 0.015; HighPTCut: 10.0;
      @Flags : OnlyZSchi2cut, RadialSearch
      @Functions : CombineCollections, BuildNewTracks
    </parameter>

    <parameter name="trackPurity" type="double">0.7 </parameter>
    <parameter name="ThetaRange" type="double"> 0.05 </parameter>
 
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  </processor>

  <processor name="ClonesAndSplitTracksFinder" type="ClonesAndSplitTracksFinder">
    <parameter name="InputTrackCollectionName" type="string"> SiTracksCT </parameter>
    <parameter name="OutputTrackCollectionName" type="string"> SiTracks </parameter>
    <parameter name="MultipleScatteringOn" type="bool"> true </parameter>
    <parameter name="EnergyLossOn" type="bool"> true </parameter>
    <parameter name="SmoothOn" type="bool"> false </parameter>
    <parameter name="extrapolateForward" type="bool"> true </parameter>
    <parameter name="maxDeltaTheta" type="double"> 0.59 </parameter>
    <parameter name="maxDeltaPhi" type="double"> 0.99 </parameter>
    <parameter name="maxDeltaPt" type="double"> 0.69 </parameter>
    <parameter name="mergeSplitTracks" type="bool"> false </parameter>
  </processor>


  <processor name="Refit" type="RefitFinal">
    <!--Refit processor that calls finaliseLCIOTrack after taking the trackstate from the existing track. No re-sorting of hits is done-->
    <!--Use Energy Loss in Fit-->
    <parameter name="EnergyLossOn" type="bool"> true </parameter>
    <!--Name of the input track to MCParticle relation collection-->
    <parameter name="InputRelationCollectionName" type="string" lcioInType="LCRelation"> SiTrackRelations </parameter>
    <!--Name of the input track collection-->
    <parameter name="InputTrackCollectionName" type="string" lcioInType="Track"> SiTracks </parameter>
    <!--maximum allowable chi2 increment when moving from one site to another-->
    <parameter name="Max_Chi2_Incr" type="double"> 1.79769e+30 </parameter>
    <!--Use MultipleScattering in Fit-->
    <parameter name="MultipleScatteringOn" type="bool"> true </parameter>
    <!--Refit Track to MCParticle relation collection Name-->
    <parameter name="OutputRelationCollectionName" type="string" lcioOutType="LCRelation">
      SiTracks_Refitted_Relation
    </parameter>
    <!--Name of the output track collection-->
    <parameter name="OutputTrackCollectionName" type="string" lcioOutType="Track">
      SiTracks_Refitted
    </parameter>
    <!--Identifier of the reference point to use for the fit initialisation, -1 means at 0 0 0-->
    <parameter name="ReferencePoint" type="int"> -1 </parameter>
    <!--Smooth All Mesurement Sites in Fit-->
    <parameter name="SmoothOn" type="bool"> false </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <!--parameter name="Verbosity" type="string"> DEBUG </parameter-->
    <!--if true extrapolation in the forward direction (in-out), otherwise backward (out-in)-->
    <parameter name="extrapolateForward" type="bool"> true </parameter>
    <!--Final minimum number of track clusters-->
    <parameter name="MinClustersOnTrackAfterFit" type="int">4 </parameter>
  </processor>


  <processor name="MyClicEfficiencyCalculator" type="ClicEfficiencyCalculator">
    <!--ClicEfficiencyCalculator calculates the tracking efficiency and makes some performance plots-->
    <!--Name of the efficiency tree-->
    <parameter name="efficiencyTreeName" type="string">trktree </parameter>
    <!--Name of the purity tree-->
    <parameter name="purityTreeName" type="string">puritytree </parameter>
    <!--Name of the efficiency tree-->
    <parameter name="mcTreeName" type="string">mctree </parameter>   <!-- probably to be killed soon -->
    <!--Track collection name-->
    <parameter name="TrackCollectionName" type="string" lcioInType="Track"> SiTracks_Refitted </parameter>
    <!--Name of the TrackerHit input collections-->
    <parameter name="TrackerHitCollectionNames" type="StringVec" lcioInType="TrackerHitPlane"> VXDTrackerHits VXDEndcapTrackerHits ITrackerHits OTrackerHits ITrackerEndcapHits OTrackerEndcapHits  </parameter>
    <!--Name of TrackerHit relation collections-->
    <parameter name="TrackerHitRelCollectionNames" type="StringVec" lcioInType="LCRelation"> VXDTrackerHitRelations VXDEndcapTrackerHitRelations InnerTrackerBarrelHitsRelations OuterTrackerBarrelHitsRelations InnerTrackerEndcapHitsRelations OuterTrackerEndcapHitsRelations </parameter>
    <!--Name of the MCParticle input collection-->
    <parameter name="MCParticleCollectionName" type="string" lcioInType="MCParticle">MCParticle </parameter>
    <!--Name of the MCPhysicsParticles input collection-->
    <parameter name="MCPhysicsParticleCollectionName" type="string" lcioInType="MCParticle">MCPhysicsParticles </parameter>
    <!--Name of the output collection of the not reconstructed charged MCParticle-->
    <parameter name="MCParticleNotReco" type="string" lcioOutType="MCParticle">MCParticleNotReco </parameter>
    <!--If true additional plots (n of hits per subdetector per mc particle, mc theta, mc pt, info if the particle is decayed in the tracker) will be added to the Ntuple mctree-->
    <parameter name="morePlots" type="bool">false </parameter>
    <!--Set of cuts to define 'reconstractable' particles for eff computation. The options are: NHits, NHitsVXD, ILDLike-->
    <parameter name="reconstructableDefinition" type="string">ILDLike </parameter>
    <!--Detector element ID for the vertex Barrel-->
    <parameter name="vertexBarrelID" type="int">1 </parameter>  <!-- obsolete -->
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  </processor>


  <processor name="MyTrackChecker" type="TrackChecker">
    <!--TrackChecker plots pull distributions, track resolution parameters and reconstruction efficiencies-->
    <!--Name of the MCParticle input collection-->
    <parameter name="MCParticleCollectionName" type="string" lcioInType="MCParticle">MCParticle </parameter>
    <!--Track collection name-->
    <parameter name="TrackCollectionName" type="string" lcioInType="Track"> SiTracks_Refitted </parameter>
    <!--Track relation collection name-->
    <parameter name="TrackRelationCollectionName" type="string" lcioInType="LCRelation">SiTracksMCTruthLink </parameter>
    <!--Name of the root tree-->
    <parameter name="TreeName" type="string">checktree </parameter>
    <!--Flag to fill only tree variables or also histogram version of pulls and residuals-->
    <parameter name="UseOnlyTree" type="bool">true </parameter>  <!-- probably obsolete- to be checked -->
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  </processor>


  <processor name="MyAIDAProcessor" type="AIDAProcessor">
    <!--Processor that handles AIDA files. Creates on directory per processor.  Processors only need to create and fill the histograms, clouds and tuples. Needs to be the first ActiveProcessor-->
    <!-- compression of output file 0: false >0: true (default) -->
    <parameter name="Compress" type="int" value="1"/>
    <!-- filename without extension-->
    <parameter name="FileName" type="string" value="histograms"/>
    <!-- type of output file xml (default) or root ( only OpenScientist)-->
    <parameter name="FileType" type="string" value="root "/>
  </processor>


  <processor name="EventNumber" type="Statusmonitor">
    <parameter name="HowOften" type="int">1 </parameter>
    <parameter name="Verbosity" type="string"> MESSAGE </parameter>
  </processor>


  <processor name="MyDDCaloDigi" type="DDCaloDigi">
    <!--Performs simple digitization of sim calo hits...-->

    <!--Hit times histograms-->
    <parameter name="Histograms" type="int">0 </parameter>
    <parameter name="RootFile" type="string">Digi_SiW.root</parameter>
    <!--CaloHit Relation Collection-->
    <parameter name="RelationOutputCollection" type="string" lcioOutType="LCRelation">RelationCaloHit </parameter>
    <!--energy required to create e-h pair in silicon (in eV)-->
    <parameter name="energyPerEHpair" type="float">3.6 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <!--parameter name="Verbosity" type="string">DEBUG </parameter-->


    <!-- ECAL -->

    <!--ECAL Collection Names-->
    <parameter name="ECALCollections" type="StringVec" lcioInType="SimCalorimeterHit">ECalBarrelCollection ECalEndcapCollection ECalPlugCollection </parameter>
    <!--ECAL Collection of real Hits-->
    <parameter name="ECALOutputCollection0" type="string" lcioOutType="CalorimeterHit">ECALBarrel </parameter>
    <!--ECAL Collection of real Hits-->
    <parameter name="ECALOutputCollection1" type="string" lcioOutType="CalorimeterHit">ECALEndcap </parameter>
    <!--ECAL Collection of real Hits-->
    <parameter name="ECALOutputCollection2" type="string" lcioOutType="CalorimeterHit">ECALOther </parameter>
    <!--Digital Ecal-->
    <parameter name="IfDigitalEcal" type="int">0 </parameter>
    <!--Index of ECal Layers-->
    <parameter name="ECALLayers" type="IntVec">41 100  </parameter>
    <!--default ECAL layer configuration (used if not found in gear file)-->
    <parameter name="ECAL_default_layerConfig" type="string">000000000000000 </parameter>
    <!--default number of virtual cells (used if not found in gear file)-->
    <parameter name="StripEcal_default_nVirtualCells" type="int">9 </parameter>

    <!--calibration to convert ECAL deposited energy to MIPs-->
    <parameter name="CalibECALMIP" type="float">0.0001 </parameter>
    <!--Calibration coefficients for ECAL-->
    <parameter name="CalibrECAL" type="FloatVec">35.8411424188 35.8411424188</parameter>
    <!--Threshold for ECAL Hits in GeV-->
    <parameter name="ECALThreshold" type="float">5e-05 </parameter>
    <!--Unit for ECAL Threshold. Can be "GeV", "MIP" or "px". MIP and px need properly set calibration constants-->
    <parameter name="ECALThresholdUnit" type="string">GeV </parameter>
    <!--Energy correction for ECAL endcap-->
    <parameter name="ECALEndcapCorrectionFactor" type="float">1.0672142727</parameter>
    <!--Correct for ECAL gaps-->
    <parameter name="ECALGapCorrection" type="int">1 </parameter>
    <!--Factor applied to gap correction-->
    <parameter name="ECALGapCorrectionFactor" type="float">1 </parameter>
    <!--Factor applied to module gap correction-->
    <parameter name="ECALModuleGapCorrectionFactor" type="float">0.0 </parameter>
    <!--Ecal correction for theta dependency of calibration for MAPS-->
    <parameter name="MapsEcalCorrection" type="int">0 </parameter>

    <!--ECAL total number of MPPC/SiPM pixels for implementation of saturation effect-->
    <parameter name="ECAL_PPD_N_Pixels" type="int">10000 </parameter>
    <!--ECAL fractional uncertainty of effective total number of MPPC/SiPM pixels-->
    <parameter name="ECAL_PPD_N_Pixels_uncertainty" type="float">0.05 </parameter>
    <!--# Photo-electrons per MIP (scintillator): used to poisson smear #PEs if >0-->
    <parameter name="ECAL_PPD_PE_per_MIP" type="float">7 </parameter>
    <!--apply realistic digitisation to ECAL hits? (0=none, 1=silicon, 2=scintillator)-->
    <parameter name="ECAL_apply_realistic_digi" type="int">0 </parameter>
    <!--ECAL random dead cell fraction (as a fraction: 0->1) -->
    <parameter name="ECAL_deadCellRate" type="float">0 </parameter>
    <!--store dead ECAL cells in memory? (WARNING: can take a lot of memory if used...) -->
    <parameter name="ECAL_deadCell_memorise" type="bool">false </parameter>
    <!--typical electronics noise (ECAL, in MIP units)-->
    <parameter name="ECAL_elec_noise_mips" type="float">0 </parameter>
    <!--maximum of dynamic range for ECAL (in MIPs)-->
    <parameter name="ECAL_maxDynamicRange_MIP" type="float">2500 </parameter>
    <!--correlated ECAL random gaussian miscalibration (as a fraction: 1.0 = 100%) -->
    <parameter name="ECAL_miscalibration_correl" type="float">0 </parameter>
    <!--uncorrelated ECAL random gaussian miscalibration (as a fraction: 1.0 = 100%) -->
    <parameter name="ECAL_miscalibration_uncorrel" type="float">0 </parameter>
    <!--store oncorrelated ECAL miscalbrations in memory? (WARNING: can take a lot of memory if used...) -->
    <parameter name="ECAL_miscalibration_uncorrel_memorise" type="bool">false </parameter>
    <!--variation of mppc/sipm pixels capacitance in ECAL (as a fraction: 0.01=1%)-->
    <parameter name="ECAL_pixel_spread" type="float">0.05 </parameter>
    <!--length scale for absorbtion along scintillator strip (mm)-->
    <parameter name="ECAL_strip_absorbtionLength" type="float">1e+06 </parameter>
    
    <!--Use ECAL hit times-->
    <parameter name="UseEcalTiming" type="int">1 </parameter>
    <!--Correct ECAL hit times for propagation: radial distance/c-->
    <parameter name="ECALCorrectTimesForPropagation" type="int">1 </parameter>
    <!--ECAL Time Window minimum time in ns-->
    <parameter name="ECALTimeWindowMin" type="float">-1 </parameter>
    <!--ECAL BarrelTime Window maximum time in ns-->
    <parameter name="ECALBarrelTimeWindowMax" type="float">10 </parameter>
    <!--ECAL Endcap Time Window maximum time in ns-->
    <parameter name="ECALEndcapTimeWindowMax" type="float">10 </parameter>
    <!--Use simple time window cut on hit times? If false: use original hit-time clustering algorithm. If true: use time window defined by ECALBarrelTimeWindowMin and ECALBarrelTimeWindowMax-->
    <parameter name="ECALSimpleTimingCut" type="bool">true </parameter>
    <!--ECAL Minimum Delta Time in ns for resolving two hits--> <!-- used only if ECALSimpleTimingCut is false -->
    <parameter name="ECALDeltaTimeHitResolution" type="float">10 </parameter>
    <!--ECAL Time Resolution used to smear hit times-->
    <parameter name="ECALTimeResolution" type="float">10 </parameter>


    <!-- HCAL -->
    
    <!--HCAL Collection Names-->
    <parameter name="HCALCollections" type="StringVec" lcioInType="SimCalorimeterHit">HCalBarrelCollection HCalEndcapCollection HCalRingCollection </parameter>
    <!--HCAL Collection of real Hits-->
    <parameter name="HCALOutputCollection0" type="string" lcioOutType="CalorimeterHit">HCALBarrel </parameter>
    <!--HCAL Collection of real Hits-->
    <parameter name="HCALOutputCollection1" type="string" lcioOutType="CalorimeterHit">HCALEndcap </parameter>
    <!--HCAL Collection of real Hits-->
    <parameter name="HCALOutputCollection2" type="string" lcioOutType="CalorimeterHit">HCALOther </parameter>
    <!--Digital Hcal-->
    <parameter name="IfDigitalHcal" type="int">0 </parameter>
    <!--Index of HCal Layers-->
    <parameter name="HCALLayers" type="IntVec">100  </parameter>

    <!--calibration to convert HCAL deposited energy to MIPs-->
    <parameter name="CalibHCALMIP" type="float">0.0001 </parameter>
    <!--Calibration coefficients for Barrel HCAL-->
    <parameter name="CalibrHCALBarrel" type="FloatVec">49.2031079063</parameter>
    <!-- CalibrHcalBarrel Should be 38.995 for 17 mm -->
    <!--Calibration coefficients for EndCap HCAL-->
    <parameter name="CalibrHCALEndcap" type="FloatVec">53.6263377733</parameter>
    <!--Calibration coefficients for Other (Ring) HCAL-->
    <parameter name="CalibrHCALOther" type="FloatVec">62.2125698179</parameter>
    <!--Threshold for HCAL Hits in GeV-->
    <parameter name="HCALThreshold" type="FloatVec">0.00025  </parameter>
    <!--Unit for HCAL Threshold. Can be "GeV", "MIP" or "px". MIP and px need properly set calibration constants-->
    <parameter name="HCALThresholdUnit" type="string">GeV </parameter>
    <!--Energy correction for HCAL endcap-->
    <parameter name="HCALEndcapCorrectionFactor" type="float">1.000 </parameter>
    <!--Correct for ECAL gaps-->
    <parameter name="HCALGapCorrection" type="int">1 </parameter>
    <!--Factor applied to module gap correction-->
    <parameter name="HCALModuleGapCorrectionFactor" type="float">0.5 </parameter>

    <!--HCAL total number of MPPC/SiPM pixels for implementation of saturation effect-->
    <parameter name="HCAL_PPD_N_Pixels" type="int">400 </parameter>
    <!--HCAL fractional uncertainty of effective total number of MPPC/SiPM pixels-->
    <parameter name="HCAL_PPD_N_Pixels_uncertainty" type="float">0.05 </parameter>
    <!--# Photo-electrons per MIP (for AHCAL): used to poisson smear #PEs if >0-->
    <parameter name="HCAL_PPD_PE_per_MIP" type="float">10 </parameter>
    <!--apply realistic digitisation to HCAL hits? (0=none, 1=scintillator/SiPM)-->
    <parameter name="HCAL_apply_realistic_digi" type="int">0 </parameter>
    <!--HCAL random dead cell fraction (as a fraction: 0->1) -->
    <parameter name="HCAL_deadCellRate" type="float">0 </parameter>
    <!--store dead HCAL cells in memory? (WARNING: can take a lot of memory if used...) -->
    <parameter name="HCAL_deadCell_memorise" type="bool">false </parameter>
    <!--typical electronics noise (HCAL, in MIP units)-->
    <parameter name="HCAL_elec_noise_mips" type="float">0 </parameter>
    <!--maximum of dynamic range for HCAL (in MIPs)-->
    <parameter name="HCAL_maxDynamicRange_MIP" type="float">200 </parameter>
    <!--correlated HCAL random gaussian miscalibration (as a fraction: 1.0 = 100%) -->
    <parameter name="HCAL_miscalibration_correl" type="float">0 </parameter>
    <!--uncorrelated HCAL random gaussian miscalibration (as a fraction: 1.0 = 100%) -->
    <parameter name="HCAL_miscalibration_uncorrel" type="float">0 </parameter>
    <!--store oncorrelated HCAL miscalbrations in memory? (WARNING: can take a lot of memory if used...) -->
    <parameter name="HCAL_miscalibration_uncorrel_memorise" type="bool">false </parameter>
    <!--variation of mppc/sipm pixels capacitance in HCAL (as a fraction: 0.01=1%)-->
    <parameter name="HCAL_pixel_spread" type="float">0 </parameter>

    <!--Use HCAL hit times-->
    <parameter name="UseHcalTiming" type="int">1 </parameter>
    <!--Correct HCAL hit times for propagation: radial distance/c-->
    <parameter name="HCALCorrectTimesForPropagation" type="int">1 </parameter>
    <!--HCAL Time Window minimum time in ns-->
    <parameter name="HCALTimeWindowMin" type="float">-1 </parameter>
    <!--HCAL Time Window maximum time in ns-->
    <parameter name="HCALBarrelTimeWindowMax" type="float">10 </parameter>
    <!--HCAL Time Window maximum time in ns-->
    <parameter name="HCALEndcapTimeWindowMax" type="float">10 </parameter>
    <!--Use simple time window cut on hit times? If false: use original hit-time clustering algorithm. If true: use time window defined by HCALBarrelTimeWindowMin and HCALBarrelTimeWindowMax-->
    <parameter name="HCALSimpleTimingCut" type="bool">true </parameter>
    <!--HCAL Minimum Delta Time in ns for resolving two hits--> <!-- used only if HCALSimpleTimingCut is false --> 
    <parameter name="HCALDeltaTimeHitResolution" type="float">10 </parameter>
    <!--HCAL Time Resolution used to smear hit times-->
    <parameter name="HCALTimeResolution" type="float">10 </parameter>

  </processor>



  <processor name="MyDDMarlinPandora" type="DDPandoraPFANewProcessor">
    <parameter name="PandoraSettingsXmlFile" type="String"> PandoraSettings/PandoraSettingsDefault.xml </parameter>
    <!-- CLIC specifict software compensation weights derived from K0L and neutrons -->
    <parameter name="SoftwareCompensationWeights" type="FloatVec">1.61741 -0.00444385 2.29683e-05 -0.0731236 -0.00157099 -7.09546e-07 0.868443 1.0561 -0.0238574</parameter>
    <parameter name="SoftwareCompensationEnergyDensityBins" type="FloatVec">0 2. 5. 7.5 9.5 13. 16. 20. 23.5 28. 33. 40. 50. 75. 100.</parameter>
    <parameter name="FinalEnergyDensityBin" type="float">110.</parameter>
    <parameter name="MaxClusterEnergyToApplySoftComp" type="float">2000.</parameter>
    <!-- Collection names -->
    <parameter name="TrackCollections" type="StringVec"> SiTracks_Refitted </parameter>
    <parameter name="ECalCaloHitCollections" type="StringVec">ECALBarrel ECALEndcap ECALOther</parameter>
    <parameter name="HCalCaloHitCollections" type="StringVec">HCALBarrel HCALEndcap HCALOther</parameter>
    <parameter name="LCalCaloHitCollections" type="StringVec"></parameter>
    <parameter name="LHCalCaloHitCollections" type="StringVec"></parameter>
    <parameter name="MuonCaloHitCollections" type="StringVec">MUON</parameter>
    <parameter name="MCParticleCollections" type="StringVec">MCParticle</parameter>
    <parameter name="RelCaloHitCollections" type="StringVec">RelationCaloHit RelationMuonHit</parameter>
    <parameter name="RelTrackCollections" type="StringVec"> SiTracks_Refitted_Relation </parameter>
    <parameter name="KinkVertexCollections" type="StringVec">KinkVertices</parameter>
    <parameter name="ProngVertexCollections" type="StringVec">ProngVertices</parameter>
    <parameter name="SplitVertexCollections" type="StringVec">SplitVertices</parameter>
    <parameter name="V0VertexCollections" type="StringVec">V0Vertices</parameter>
    <parameter name="ClusterCollectionName" type="String">PandoraClusters</parameter>
    <parameter name="PFOCollectionName" type="String">PandoraPFOs</parameter>
    <!-- Calibration constants -->
    <parameter name="ECalToMipCalibration" type="float">181.818 </parameter>
    <parameter name="HCalToMipCalibration" type="float">40.8163</parameter>
    <parameter name="ECalMipThreshold" type="float">0.5</parameter>
    <parameter name="HCalMipThreshold" type="float">0.3</parameter>
    <parameter name="ECalToEMGeVCalibration" type="float">1.02373335516</parameter>
    <parameter name="HCalToEMGeVCalibration" type="float">1.02373335516</parameter>
    <parameter name="ECalToHadGeVCalibrationBarrel" type="float">1.24223718397</parameter>
    <parameter name="ECalToHadGeVCalibrationEndCap" type="float">1.24223718397</parameter>
    <parameter name="HCalToHadGeVCalibration" type="float">1.01799349172</parameter>
    <parameter name="MuonToMipCalibration" type="float">19607.8</parameter>
    <parameter name="DigitalMuonHits" type="int">0</parameter>
    <parameter name="MaxHCalHitHadronicEnergy" type="float">1000000</parameter> 
    <!--Whether to calculate track states manually, rather than copy stored fitter values-->
    <parameter name="UseOldTrackStateCalculation" type="int">0 </parameter>
    <parameter name="NEventsToSkip" type="int">0</parameter>
    <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> WARNING</parameter>
    <!--Energy Corrections in Marlin Pandora-->
    <!--parameter name="InputEnergyCorrectionPoints" type="FloatVec">InputEnergyCorrectionPoints_XXXX</parameter-->
    <!--parameter name="OutputEnergyCorrectionPoints" type="FloatVec">OutputEnergyCorrectionPoints_XXXX</parameter-->
    
    <!--Decides whether to create gaps in the geometry (ILD-specific)-->
    <parameter name="CreateGaps" type="bool">false </parameter>
    
    <!--Track quality settings: need to be optimized! More in processor-->
    <!--Cut on fractional of expected number of BarrelTracker hits-->
    <parameter name="MinBarrelTrackerHitFractionOfExpected" type="int">0 </parameter>
    <!--Cut on minimum number of FTD hits of BarrelTracker hit fraction to be applied-->
    <parameter name="MinFtdHitsForBarrelTrackerHitFraction" type="int">0 </parameter>
    <!--Track quality cut: the minimum number of ftd track hits for ftd only tracks-->
    <parameter name="MinFtdTrackHits" type="int">0 </parameter>
    <!--Min track momentum required to perform final quality checks on number of hits-->
    <parameter name="MinMomentumForTrackHitChecks" type="float">0 </parameter>
    <!--Cut on fractional of expected number of TPC hits-->
    <parameter name="MinTpcHitFractionOfExpected" type="float">0 </parameter>
    <!--Sanity check on separation between ip and track projected ecal position-->
    <parameter name="MinTrackECalDistanceFromIp" type="float">0 </parameter>
    <!--Track quality cut: the minimum number of track hits-->
    <parameter name="MinTrackHits" type="int">0 </parameter>
    
    <!-- MORE TRACKING  CUTS -->
    <!--Max distance from track to BarrelTracker r max to id whether track reaches ecal-->
    <parameter name="ReachesECalBarrelTrackerOuterDistance" type="float">-100 </parameter>
    <!--Max distance from track to BarrelTracker z max to id whether track reaches ecal-->
    <parameter name="ReachesECalBarrelTrackerZMaxDistance" type="float">-50 </parameter>
    <!--Max distance from track hit to ftd z position to identify ftd hits-->
    <parameter name="ReachesECalFtdZMaxDistance" type="float">1 </parameter>
    <!--Min FTD layer for track to be considered to have reached ecal-->
    <parameter name="ReachesECalMinFtdLayer" type="int">0 </parameter>
    <!--Minimum number of BarrelTracker hits to consider track as reaching ecal-->
    <parameter name="ReachesECalNBarrelTrackerHits" type="int">0 </parameter>
    <!--Minimum number of ftd hits to consider track as reaching ecal-->
    <parameter name="ReachesECalNFtdHits" type="int">0 </parameter>
    <!--Maximum energy for unmatched vertex track-->
    <parameter name="UnmatchedVertexTrackMaxEnergy" type="float">5 </parameter>
    <!--Whether can form pfos from tracks that don't start at vertex-->
    <parameter name="UseNonVertexTracks" type="int">1 </parameter>
    <!--Whether to calculate track states manually, rather than copy stored fitter values-->
    <parameter name="UseOldTrackStateCalculation" type="int">0 </parameter>
    <!--Whether can form pfos from unmatched tracks that don't start at vertex-->
    <parameter name="UseUnmatchedNonVertexTracks" type="int">0 </parameter>
    <!--Whether can form pfos from unmatched tracks that start at vertex-->
    <parameter name="UseUnmatchedVertexTracks" type="int">1 </parameter>
    <!--Track z0 cut used to determine whether track can be used to form pfo-->
    <parameter name="Z0TrackCut" type="float">200 </parameter>
    <!--z0 cut used to determine whether unmatched vertex track can form pfo-->
    <parameter name="Z0UnmatchedVertexTrackCut" type="float">5 </parameter>
    <!--Non vtx track z cut to determine whether track can be used to form pfo-->
    <parameter name="ZCutForNonVertexTracks" type="float">250 </parameter>
    <!--Track quality cut: the maximum number of track hits-->
    <parameter name="MaxTrackHits" type="int">5000 </parameter>
    <!--Cut on fractional track momentum error-->
    <parameter name="MaxTrackSigmaPOverP" type="float">0.15 </parameter>
    <!--Constant relating track curvature in b field to momentum-->
    <parameter name="CurvatureToMomentumFactor" type="float">0.00015 </parameter>
    <!--Track d0 cut used to determine whether track can be used to form pfo-->
    <parameter name="D0TrackCut" type="float">200 </parameter>
    <!--d0 cut used to determine whether unmatched vertex track can form pfo-->
    <parameter name="D0UnmatchedVertexTrackCut" type="float">5 </parameter>

    <!--The algorithm name for filling start vertex-->
    <parameter name="StartVertexAlgorithmName" type="string">PandoraPFANew </parameter>
    <!--Start Vertex Collection Name-->
    <parameter name="StartVertexCollectionName" type="string" lcioOutType="Vertex"> PandoraStartVertices </parameter>

    <!--Normal vector for the muon barrel sensitive layers in local coordinates-->
    <parameter name="YokeBarrelNormalVector" type="FloatVec">0 0 1  </parameter>
    <!--Normal vector for the HCal barrel sensitive layers in local coordinates-->
    <parameter name="HCalBarrelNormalVector" type="FloatVec">0 0 1  </parameter>
    <!--Normal vector for the ECal barrel sensitive layers in local coordinates-->
    <parameter name="ECalBarrelNormalVector" type="FloatVec">0 0 1  </parameter>
    <!--The bfield in the muon barrel, units Tesla-->
    <parameter name="MuonBarrelBField" type="float">-1.5 </parameter>
    <!--The bfield in the muon endcap, units Tesla-->
    <parameter name="MuonEndCapBField" type="float">0.01 </parameter>

    <!--The constant term for EM shower-->
    <parameter name="EMConstantTerm" type="float">0.01 </parameter>
    <!--The stochastic term for EM shower-->
    <parameter name="EMStochasticTerm" type="float">0.17 </parameter>
    <!--The constant term for Hadronic shower-->
    <parameter name="HadConstantTerm" type="float">0.03 </parameter>
    <!--The stochastic term for Hadronic shower-->
    <parameter name="HadStochasticTerm" type="float">0.6 </parameter>

    <!--The input energy points for hadronic energy correction-->
    <parameter name="InputEnergyCorrectionPoints" type="FloatVec"> </parameter>

    <!--Maximum number of layers from candidate outer layer hit to rear of detector-->
    <parameter name="LayersFromEdgeMaxRearDistance" type="float">250 </parameter>
    <!--Number of layers from edge for hit to be flagged as an outer layer hit-->
    <parameter name="NOuterSamplingLayers" type="int">3 </parameter>
    <!--Distance of possible second track state in the ECal Endcap to the ECal barrel inner radius-->
    <parameter name="TrackStateTolerance" type="float">0 </parameter>

    <!--Track cut on distance from BarrelTracker inner r to id whether track can form pfo-->
    <parameter name="MaxBarrelTrackerInnerRDistance" type="float">200 </parameter>

    <!--The minimum correction to on ecal hit in Pandora energy correction-->
    <parameter name="MinCleanCorrectedHitEnergy" type="float">0.1 </parameter>
    <!--The minimum hit energy to apply ecal correction in Pandora energy correction-->
    <parameter name="MinCleanHitEnergy" type="float">0.5 </parameter>
    <!--The minimum hit energy fraction to apply ecal correction in Pandora energy correction-->
    <parameter name="MinCleanHitEnergyFraction" type="float">0.01 </parameter>

    <!--The energy for a digital muon calorimeter hit, units GeV-->
    <parameter name="MuonHitEnergy" type="float">0.5 </parameter>

    <!--Whether to form pandora track relationships using v0 and kink info-->
    <parameter name="ShouldFormTrackRelationships" type="int">1 </parameter>

    <!--The name of the DDTrackCreator implementation-->
    <parameter name="TrackCreatorName" type="string">DDTrackCreatorCLIC </parameter>
    <!--Name of the track fitting system to be used (KalTest, DDKalTest, aidaTT, ... )-->
    <parameter name="TrackSystemName" type="string">DDKalTest </parameter>
    <!--The output energy points for hadronic energy correction-->
    <parameter name="OutputEnergyCorrectionPoints" type="FloatVec"> </parameter>


    <!--To use scintillator layers ~ hybrid ECAL, this should be true-->
    <parameter name="UseEcalScLayers" type="int">0 </parameter>
    <!--Threshold for creating calo hits in the Sc-layers of ECAL, units mip-->
    <parameter name="ECalScMipThreshold" type="float">0 </parameter>
    <!--The calibration from deposited Sc-layer energy to EM energy-->
    <parameter name="ECalScToEMGeVCalibration" type="float">1 </parameter>
    <!--The calibration from deposited Sc-layer energy to the barrel hadronic energy-->
    <parameter name="ECalScToHadGeVCalibrationBarrel" type="float">1 </parameter>
    <!--The calibration from deposited Sc-layer energy on the endcaps to hadronic energy-->
    <parameter name="ECalScToHadGeVCalibrationEndCap" type="float">1 </parameter>
    <!--The calibration from deposited Sc-layer energy to mip-->
    <parameter name="ECalScToMipCalibration" type="float">1 </parameter>
    <!--Threshold for creating calo hits in the Si-layers of ECAL, units mip-->
    <parameter name="ECalSiMipThreshold" type="float">0 </parameter>
    <!--The calibration from deposited Si-layer energy to EM energy-->
    <parameter name="ECalSiToEMGeVCalibration" type="float">1 </parameter>
    <!--The calibration from deposited Si-layer energy on the barrel to hadronic energy-->
    <parameter name="ECalSiToHadGeVCalibrationBarrel" type="float">1 </parameter>
    <!--The calibration from deposited Si-layer energy on the enecaps to hadronic energy-->
    <parameter name="ECalSiToHadGeVCalibrationEndCap" type="float">1 </parameter>
    <!--The calibration from deposited Si-layer energy to mip-->
    <parameter name="ECalSiToMipCalibration" type="float">1 </parameter>
    <!--To use strip splitting algorithm, this should be true-->
    <parameter name="StripSplittingOn" type="int">0 </parameter>

  </processor>

  <processor name="MyDDSimpleMuonDigi" type="DDSimpleMuonDigi">
    <!--Performs simple digitization of sim calo hits...-->
    <!--Calibration coefficients for MUON-->
    <parameter name="CalibrMUON" type="FloatVec">70.1</parameter>
    <!-- maximum hit energy for a MUON hit -->
    <parameter name="MaxHitEnergyMUON" type="float">2.0</parameter>
    <!--MUON Collection Names-->
    <parameter name="MUONCollections" type="StringVec">
      YokeBarrelCollection YokeEndcapCollection</parameter>
    <!--MUON Collection of real Hits-->
    <parameter name="MUONOutputCollection" type="string">MUON </parameter>
    <!--Threshold for MUON Hits in GeV-->
    <parameter name="MuonThreshold" type="float">1e-06 </parameter>
    <!--MuonHit Relation Collection-->
    <parameter name="RelationOutputCollection" type="string">RelationMuonHit </parameter>
  </processor>

  <group name="MergeCollections">

    <processor name="MergeRP" type="MergeCollections">
      <parameter name="CollectionParameterIndex" type="int">0 </parameter>
      <parameter name="InputCollectionIDs" type="IntVec"> </parameter>
      <parameter name="InputCollections" type="StringVec"> PandoraPFOs LumiCalRecoParticles BeamCalRecoParticles </parameter>
      <parameter name="OutputCollection" type="string"> MergedRecoParticles </parameter>
    </processor>

    <processor name="MergeClusters" type="MergeCollections">
      <parameter name="CollectionParameterIndex" type="int">0 </parameter>
      <parameter name="InputCollectionIDs" type="IntVec"> </parameter>
      <parameter name="InputCollections" type="StringVec"> PandoraClusters LumiCalClusterer BeamCalClusters </parameter>
      <parameter name="OutputCollection" type="string"> MergedClusters </parameter>
    </processor>
  </group>

  <processor name="MyRecoMCTruthLinker" type="RecoMCTruthLinker">
    <!--links RecontructedParticles to the MCParticle based on number of hits used-->
    <!--energy cut for Brems that are kept-->
    <parameter name="BremsstrahlungEnergyCut" type="float">1 </parameter>
    <!--Name of the updated calo-hit MCTruthLink output collection - not created if empty()-->
    <parameter name="CalohitMCTruthLinkName" type="string" lcioOutType="LCRelation"> CalohitMCTruthLink </parameter>
    <!--Name of the Clusters input collection-->
    <parameter name="ClusterCollection" type="string" lcioInType="Cluster">MergedClusters </parameter>
    <!--Name of the clusterMCTruthLink output collection - not created if empty()-->
    <parameter name="ClusterMCTruthLinkName" type="string" lcioOutType="LCRelation"> ClusterMCTruthLink </parameter>
    <!--true: All reco <-> true relations are given, with weight = 10000*calo
	weight+track weight (weights in permill). false: Only highest contributor
	linked,and only to tracks, not clusters if there are any tracks-->
    <parameter name="FullRecoRelation" type="bool">false </parameter>
    <!--Work-around Mokka bug in vertex-is-not-endpoint-of-parent flag (logic inverted)-->
    <parameter name="InvertedNonDestructiveInteractionLogic" type="bool"> false </parameter>
    <!--PDG codes of particles of which the daughters will be kept in the skimmmed MCParticle collection-->
    <!-- FIXME:Check if we really want to keep those -->
    <parameter name="KeepDaughtersPDG" type="IntVec">22 111 310 13 211 321 3120 </parameter>
    <!--Name of the MCParticle input collection-->
    <parameter name="MCParticleCollection" type="string" lcioInType="MCParticle"> MCPhysicsParticles </parameter>
    <!--Name of the skimmed MCParticle  output collection - not created if empty()-->
    <parameter name="MCParticlesSkimmedName" type="string" lcioOutType="MCParticle"> MCParticlesSkimmed </parameter>
    <!--Name of the MCTruthClusterLink output collection-->
    <parameter name="MCTruthClusterLinkName" type="string" lcioOutType="LCRelation"> </parameter>
    <!--Name of the MCTruthRecoLink output collection-->
    <parameter name="MCTruthRecoLinkName" type="string" lcioOutType="LCRelation"> </parameter>
    <!--Name of the trackMCTruthLink output collection-->
    <parameter name="MCTruthTrackLinkName" type="string" lcioOutType="LCRelation"> </parameter>
    <!--Name of the RecoMCTruthLink output collection - not created if empty()-->
    <parameter name="RecoMCTruthLinkName" type="string" lcioOutType="LCRelation"> RecoMCTruthLink </parameter>
    <!--Name of the ReconstructedParticles input collection-->
    <parameter name="RecoParticleCollection" type="string" lcioInType="ReconstructedParticle"> MergedRecoParticles </parameter>
    <!--save photons from Brems-->
    <parameter name="SaveBremsstrahlungPhotons" type="bool">false </parameter>
    <!--Names of the SimCaloHits input collections-->
    <parameter name="SimCaloHitCollections" type="StringVec" lcioInType="SimCalorimeterHit">
      ECalBarrelCollection
      ECalEndcapCollection
      ECalPlugCollection
      HCalBarrelCollection
      HCalEndcapCollection
      HCalRingCollection
      YokeBarrelCollection
      YokeEndcapCollection
      LumiCalCollection
      BeamCalCollection
    </parameter>
    <!--Name of the  lcrelation collections, that link the SimCalorimeterHit to CalorimeterHit-->
    <parameter name="SimCalorimeterHitRelationNames" type="StringVec" lcioInType="LCRelation">
      RelationCaloHit RelationMuonHit
    </parameter>
    <!--Names of the SimTrackerHits input collection-->
    <parameter name="SimTrackerHitCollections" type="StringVec" lcioInType="SimTrackerHit">
      VertexBarrelCollection
      VertexEndcapCollection
      InnerTrackerBarrelCollection
      OuterTrackerBarrelCollection
      InnerTrackerEndcapCollection
      OuterTrackerEndcapCollection
    </parameter>
    <!--Name of the Tracks input collection-->
    <parameter name="TrackCollection" type="string" lcioInType="Track"> SiTracks_Refitted </parameter>
    <!--Name of the trackMCTruthLink output collection - not created if empty()-->
    <parameter name="TrackMCTruthLinkName" type="string" lcioOutType="LCRelation"> SiTracksMCTruthLink </parameter>
    <!--Name of the lcrelation collections, that link the TrackerHits to their SimTrackerHits.-->
    <parameter name="TrackerHitsRelInputCollections" type="StringVec" lcioInType="LCRelation">
      VXDTrackerHitRelations
      VXDEndcapTrackerHitRelations
      InnerTrackerBarrelHitsRelations
      OuterTrackerBarrelHitsRelations
      InnerTrackerEndcapHitsRelations
      OuterTrackerEndcapHitsRelations
    </parameter>
    <!--true: use relations for TrackerHits, false : use getRawHits -->
    <parameter name="UseTrackerHitRelations" type="bool"> true </parameter>
    <!--If Using Particle Gun Ignore Gen Stat-->
    <parameter name="UsingParticleGun" type="bool"> false </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> MESSAGE </parameter>
    <!--energy cut for daughters that are kept from KeepDaughtersPDG-->
    <parameter name="daughtersECutMeV" type="float"> 10 </parameter>
  </processor>



  <processor name="MyHitResiduals" type="HitResiduals">
    <!--HitResiduals plots te residual between the track fit and the hit in the local coordinate system u,v,w.-->
    <!--Use Energy Loss in Fit-->
    <parameter name="EnergyLossOn" type="bool">true </parameter>
    <!--Maximum increment allowed for the chi2-->
    <parameter name="MaxChi2Increment" type="double">1000 </parameter>
    <!--Use MultipleScattering in Fit-->
    <parameter name="MultipleScatteringOn" type="bool">true </parameter>
    <!--Smooth All Mesurement Sites in Fit-->
    <parameter name="SmoothOn" type="bool">false </parameter>
    <!--Name of the input track collection-->
    <parameter name="TrackCollectionName" type="string" lcioInType="Track"> SiTracks_Refitted </parameter>
    <!--Name of the output root file-->
    <parameter name="outFileName" type="string">residuals.root </parameter>
    <!--Name of the tree-->
    <parameter name="treeName" type="string">restree </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  </processor>

  <processor name="LumiCalReco_Obs" type="MarlinLumiCalClusterer">
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> WARNING </parameter>
    <!--Collection Containing the Hits in the LumiCal-->
    <parameter name="LumiCal_Collection" type="string" lcioInType="SimCalorimeterHit"> LumiCalCollection </parameter>
    <!--Collection of Cluster found in the LumiCal-->
    <parameter name="LumiCal_Clusters" type="string" lcioOutType="Cluster">LumiCalClusters </parameter>
    <!--Collection of Reconstructed Particles found in the LumiCal-->
    <parameter name="LumiCal_RecoParticles" type="string" lcioOutType="ReconstructedParticle">LumiCalRecoParticles </parameter>
    <!-- Number of events to skip at the begining of the LCIO file-->
    <parameter name="SkipNEvents" type="int">0 </parameter>
    <!-- Number of event to work with-->
    <parameter name="MaxRecordNumber" type="int">10 </parameter>
    <!--Name of output directory-->
    <parameter name="OutDirName" type="string">rootOut </parameter>
    <!--Name of output ROOT file ( without suffix)-->
    <parameter name="OutRootFileName" type="string"></parameter>
    <!-- Place for ROOT tree memory(1) or disk (0) -->
    <parameter name="MemoryResidentTree" type="int">0 </parameter>
    <!-- Number of events in memory resident ROOT tree.-->
    <parameter name="NumEventsTree" type="int">500 </parameter>

    <!--  Clustering/Geometry Parameters -->
    <!-- Minimal number of hits in cluster-->
    <parameter name="ClusterMinNumHits" type="int">15 </parameter>
    <!-- fraction of number of hits in one arm found in one layer to consider this layer as the ShowerPeak layer-->
    <parameter name="ElementsPercentInShowerPeakLayer" type="double">0.03 </parameter>
    <!-- Sets minimum for logarithmic energy weights-->
    <parameter name="LogWeigthConstant" type="double"> 6.5 </parameter>
    <!-- BP: see explanation in LumiCalClusterer.cpp-->
    <parameter name="MiddleEnergyHitBoundFrac" type="double"> 0.01 </parameter>
    <!-- Sets minimum energy deposit for cluster to be accepted [GeV]-->
    <parameter name="MinClusterEngy" type="double"> 2.0 </parameter>
    <!-- Calibration factor - converts cluster energy to primary
	 particle energy ( E_cluster = EnrgyCalibConst*E_primary default value for LCal ILD )-->
    <parameter name="EnergyCalibConst" type="double"> 0.01213 </parameter>
    <!-- Hit energy cut - minimum hit energy required [Gev] -->
    <parameter  name="MinHitEnergy"  type="double"> 20e-06 </parameter>
    <!-- Moliere radius, controls clusters separation distance [mm]-->
    <parameter name="MoliereRadius" type="double"> 20 </parameter>
    <!--Number of neighbor hits to consider -->
    <parameter name="NumOfNearNeighbor" type="int"> 6 </parameter>
    <!-- Choose cluster hit position weights LogMthod=-1 or simple EnergyMethod=1 -->
    <parameter name="WeightingMethod" type="string"> LogMethod </parameter>
    <!-- Layers relative phi offset (default for model ILD_o1_05,must go to gear sometimes)  [deg]-->
    <parameter name="ZLayerPhiOffset" type="double"> 0.0 </parameter>
  </processor>


  <processor name="LumiCalReco" type="BeamCalClusterReco">
    <!--BeamCalClusterReco reproduces the beamstrahlung background for a given number of bunch-crossings NumberOfBX and puts the signal hits from the lcio input file on top of that, and then clustering is attempted.-->
    <!--How to estimate background [Gaussian, Parametrised, Pregenerated, Averaged, Empty]-->
    <parameter name="BackgroundMethod" type="string">Empty </parameter>
    <!--The Name of the Detector the reconstruction is for-->
    <parameter name="DetectorName" type="string">LumiCal </parameter>
    <!--The ID where the SubClusterEnergy will be added: //LumiCal=3, BeamCal=5 in DDPFOCreator.hh-->
    <parameter name="SubClusterEnergyID" type="int"> 3 </parameter>
    <!--The ID of the first layer of the detector BeamCal 1: LumiCal: 0-->
    <parameter name="DetectorStartingLayerID" type="double"> 0 </parameter>
    <!--Collection of CalorimeterHits from the BeamCal,only created when input are SimCalorimeterHits-->
    <parameter name="BeamCalHitsOutCollection" type="string" lcioOutType="CalorimeterHit">LumiCal_Hits </parameter>
    <!--Name of BeamCal Collection-->
    <parameter name="BeamCalCollectionName" type="string" lcioInType="SimCalorimeterHit">LumiCalCollection </parameter>
    <!--Name of the Reconstructed Cluster collection-->
    <parameter name="RecoClusterCollectionname" type="string" lcioOutType="Cluster">LumiCalClusters </parameter>
    <!--Name of the Reconstructed Particle collection-->
    <parameter name="RecoParticleCollectionname" type="string" lcioOutType="ReconstructedParticle">LumiCalRecoParticles </parameter>
    <!--MCParticle Collection Name, only needed and used to estimate efficiencies-->
    <parameter name="MCParticleCollectionName" type="string" lcioInType="MCParticle">MCParticle </parameter>
    <!--Multiply deposit energy by this factor to account for sampling fraction-->
    <parameter name="LinearCalibrationFactor" type="double"> 82.377 </parameter>
    <!--Weighting constant to use in logarithmic weighting of hits, if negative energy weighting is used-->
    <parameter name="LogWeightingConstant" type="double"> 6.1 </parameter>
    <!--Maximum Distance between primary tower and neighbours to put into one cluster-->
    <parameter name="MaxPadDistance" type="double"> 62 </parameter>
    <!--Number of Bunch Crossings of Background-->
    <parameter name="NumberOfBX" type="int"> 0 </parameter>
    <!--Flag to create the TEfficiency for fast tagging library-->
    <parameter name="CreateEfficiencyFile" type="bool">false </parameter>
    <!--The name of the rootFile which will contain the TEfficiency objects-->
    <parameter name="EfficiencyFilename" type="string">TaggingEfficiency.root </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">WARNING </parameter>
    <!--Number of Event that should be printed to PDF File-->
    <parameter name="PrintThisEvent" type="int">-1 </parameter>
    <parameter name="InputFileBackgrounds" type="StringVec"> </parameter>
    <!--Rings from which onwards the outside Thresholds are used-->
    <parameter name="StartingRing" type="FloatVec">0.0 </parameter>
    <!--Energy in a Cluster to consider it an electron-->
    <parameter name="ETCluster" type="FloatVec"> 0.2 </parameter>
    <!--Energy in a Pad, after subtraction of background required to consider it for signal-->
    <parameter name="ETPad" type="FloatVec"> 20e-06 </parameter>
    <!--Layer (inclusive) from which on we start looking for signal clusters-->
    <parameter name="StartLookingInLayer" type="int">1 </parameter>
    <!--Use the cuts for the pads specified in ETPad. If false, the standard deviation of each pad times the SigmaCut Factor is used, the first entry in ETPad is used as a minimum energy to consider a pad at all-->
    <parameter name="UseConstPadCuts" type="bool">false </parameter>
    <!--If not using ConstPadCuts, each pad SigmaCut*standardDeviation is considered for clusters-->
    <parameter name="SigmaCut" type="double">1 </parameter>
    <!--Minimum number of pads in a single tower to be considered for signal-->
    <parameter name="MinimumTowerSize" type="int">4 </parameter>
    <!--How many layers are used for shower fitting-->
    <parameter name="NShowerCountingLayers" type="int">30 </parameter>
    <!--Limit on square norm of tower eqnergy chi2/ndf, where chi2 = (E_dep - E_bg)^2/sig^2. Reasonable value for pregenerated bkg is 5., for parametrised is 2.-->
    <parameter name="TowerChi2ndfLimit" type="double">5 </parameter>
    <!--Use Chi2 selection criteria to detect high energy electron in the signal.-->
    <parameter name="UseChi2Selection" type="bool">false </parameter>
  </processor>


  <group name="BeamCalReco">
      <!--BeamCalClusterReco reproduces the beamstrahlung background for a given number of bunch-crossings NumberOfBX and puts the signal hits from the lcio input file on top of that, and then clustering is attempted.-->
      <!--How to estimate background [Gaussian, Parametrised, Pregenerated, Averaged]-->
      <parameter name="BackgroundMethod" type="string">Gaussian </parameter>
      <!--The Name of the Detector the reconstruction is for-->
      <parameter name="DetectorName" type="string"> BeamCal </parameter>
      <!--The ID where the SubClusterEnergy will be added: //LumiCal=3, BeamCal=5 in DDPFOCreator.hh-->
      <parameter name="SubClusterEnergyID" type="int"> 5 </parameter>
      <!--The ID of the first layer of the detector BeamCal 1: LumiCal: 0-->
      <parameter name="DetectorStartingLayerID" type="double"> 1 </parameter>
      <!--Name of BeamCal Collection-->
      <parameter name="BeamCalCollectionName" type="string" lcioInType="SimCalorimeterHit">BeamCalCollection </parameter>
      <!--Name of the Reconstructed Cluster collection-->
      <parameter name="RecoClusterCollectionname" type="string" lcioOutType="Cluster">BeamCalClusters </parameter>
      <!--Name of the Reconstructed Particle collection-->
      <parameter name="RecoParticleCollectionname" type="string" lcioOutType="ReconstructedParticle">BeamCalRecoParticles </parameter>
      <!--MCParticle Collection Name, only needed and used to estimate efficiencies-->
      <parameter name="MCParticleCollectionName" type="string" lcioInType="MCParticle">MCParticle </parameter>
      <!--Multiply deposit energy by this factor to account for sampling fraction-->
      <parameter name="LinearCalibrationFactor" type="double">116.44 </parameter>
      <!--Number of Bunch Crossings of Background-->
      <parameter name="NumberOfBX" type="int"> 40 </parameter>
      <!--Flag to create the TEfficiency for fast tagging library-->
      <parameter name="CreateEfficiencyFile" type="bool">false </parameter>
      <!--The name of the rootFile which will contain the TEfficiency objects-->
      <parameter name="EfficiencyFilename" type="string">TaggingEfficiency.root </parameter>
      <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
      <!-- <parameter name="Verbosity" type="string">WARNING </parameter> -->
      <!--Number of Event that should be printed to PDF File-->
      <parameter name="PrintThisEvent" type="int">-1 </parameter>

    <processor name="BeamCalReco3TeV" type="BeamCalClusterReco">
      <parameter name="InputFileBackgrounds" type="StringVec">BeamCal_BackgroundPars_3TeV.root </parameter>
      <!--Rings from which onwards the outside Thresholds are used-->
      <parameter name="StartingRing" type="FloatVec">0.0 1.0 1.5 2.5 3.5  4.5 </parameter>
      <!--Energy in a Cluster to consider it an electron-->
      <parameter name="ETCluster" type="FloatVec">   5.0 4.0 3.0 2.0 2.0  1.0 </parameter>
      <!--Energy in a Pad, after subtraction of background required to consider it for signal-->
      <parameter name="ETPad" type="FloatVec">       0.5 0.4 0.3 0.2 0.15 0.1 </parameter>
      <!--Layer (inclusive) from which on we start looking for signal clusters-->
      <parameter name="StartLookingInLayer" type="int">10 </parameter>
      <!--Use the cuts for the pads specified in ETPad. If false, the standard deviation of each pad times the SigmaCut Factor is used, the first entry in ETPad is used as a minimum energy to consider a pad at all-->
      <parameter name="UseConstPadCuts" type="bool">true </parameter>
      <!--If not using ConstPadCuts, each pad SigmaCut*standardDeviation is considered for clusters-->
      <parameter name="SigmaCut" type="double">1 </parameter>
      <!--Minimum number of pads in a single tower to be considered for signal-->
      <parameter name="MinimumTowerSize" type="int">4 </parameter>
      <!--How many layers are used for shower fitting-->
      <parameter name="NShowerCountingLayers" type="int">3 </parameter>
      <!--Limit on square norm of tower energy chi2/ndf, where chi2 = (E_dep - E_bg)^2/sig^2. Reasonable value for pregenerated bkg is 5., for parametrised is 2.-->
      <parameter name="TowerChi2ndfLimit" type="double">5 </parameter>
      <!--Use Chi2 selection criteria to detect high energy electron in the signal.-->
      <parameter name="UseChi2Selection" type="bool">false </parameter>
    </processor>

    <processor name="BeamCalReco380GeV" type="BeamCalClusterReco">
      <parameter name="InputFileBackgrounds" type="StringVec">BeamCal_BackgroundPars_380GeV.root </parameter>
      <!--Rings from which onwards the outside Thresholds are used-->
      <parameter name="StartingRing" type="FloatVec">0.0 </parameter>
      <!--Energy in a Cluster to consider it an electron-->
      <parameter name="ETCluster" type="FloatVec">   1.0 </parameter>
      <!--Energy in a Pad, after subtraction of background required to consider it for signal-->
      <parameter name="ETPad" type="FloatVec">       0.01 </parameter>
      <!--Layer (inclusive) from which on we start looking for signal clusters-->
      <parameter name="StartLookingInLayer" type="int">2 </parameter>
      <!--Use the cuts for the pads specified in ETPad. If false, the standard deviation of each pad times the SigmaCut Factor is used, the first entry in ETPad is used as a minimum energy to consider a pad at all-->
      <parameter name="UseConstPadCuts" type="bool">false </parameter>
      <!--If not using ConstPadCuts, each pad SigmaCut*standardDeviation is considered for clusters-->
      <parameter name="SigmaCut" type="double">1 </parameter>
      <!--Minimum number of pads in a single tower to be considered for signal-->
      <parameter name="MinimumTowerSize" type="int">4 </parameter>
      <!--How many layers are used for shower fitting-->
      <parameter name="NShowerCountingLayers" type="int">3 </parameter>
      <!--Limit on square norm of tower energy chi2/ndf, where chi2 = (E_dep - E_bg)^2/sig^2. Reasonable value for pregenerated bkg is 5., for parametrised is 2.-->
      <parameter name="TowerChi2ndfLimit" type="double">5 </parameter>
      <!--Use Chi2 selection criteria to detect high energy electron in the signal.-->
      <parameter name="UseChi2Selection" type="bool">false </parameter>
    </processor>

  </group>

  <group name="PfoSelector">
    <!--Selects Pfos from full PFO list using timing cuts-->
    <!--ChargedPfoLooseTimingCut-->
    <parameter name="ChargedPfoLooseTimingCut" type="float">3 </parameter>
    <!--ChargedPfoNegativeLooseTimingCut-->
    <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-1 </parameter>
    <!--ChargedPfoNegativeTightTimingCut-->
    <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-0.5 </parameter>
    <!--ChargedPfoPtCut-->
    <parameter name="ChargedPfoPtCut" type="float">0 </parameter>
    <!--ChargedPfoPtCutForLooseTiming-->
    <parameter name="ChargedPfoPtCutForLooseTiming" type="float">4 </parameter>
    <!--ChargedPfoTightTimingCut-->
    <parameter name="ChargedPfoTightTimingCut" type="float">1.5 </parameter>
    <!--CheckKaonCorrection-->
    <parameter name="CheckKaonCorrection" type="int">0 </parameter>
    <!--CheckProtonCorrection-->
    <parameter name="CheckProtonCorrection" type="int">0 </parameter>
    <!--ClusterLessPfoTrackTimeCut-->
    <parameter name="ClusterLessPfoTrackTimeCut" type="float">10 </parameter>
    <!--CorrectHitTimesForTimeOfFlight-->
    <parameter name="CorrectHitTimesForTimeOfFlight" type="int">0 </parameter>
    <!--DisplayRejectedPfos-->
    <parameter name="DisplayRejectedPfos" type="int">1 </parameter>
    <!--DisplaySelectedPfos-->
    <parameter name="DisplaySelectedPfos" type="int">1 </parameter>
    <!--FarForwardCosTheta-->
    <parameter name="FarForwardCosTheta" type="float">0.975 </parameter>
    <!--ForwardCosThetaForHighEnergyNeutralHadrons-->
    <parameter name="ForwardCosThetaForHighEnergyNeutralHadrons" type="float">0.95 </parameter>
    <!--ForwardHighEnergyNeutralHadronsEnergy-->
    <parameter name="ForwardHighEnergyNeutralHadronsEnergy" type="float">10 </parameter>
    <!--HCalBarrelLooseTimingCut-->
    <parameter name="HCalBarrelLooseTimingCut" type="float">20 </parameter>
    <!--HCalBarrelTightTimingCut-->
    <parameter name="HCalBarrelTightTimingCut" type="float">10 </parameter>
    <!--HCalEndCapTimingFactor-->
    <parameter name="HCalEndCapTimingFactor" type="float">1 </parameter>
    <!--Input PFO Collection-->
    <parameter name="InputPfoCollection" type="string" lcioInType="ReconstructedParticle">PandoraPFOs </parameter>
    <!--KeepKShorts-->
    <parameter name="KeepKShorts" type="int">1 </parameter>
    <!--MaxMomentumForClusterLessPfos-->
    <parameter name="MaxMomentumForClusterLessPfos" type="float">2 </parameter>
    <!--MinECalHitsForTiming-->
    <parameter name="MinECalHitsForTiming" type="int">5 </parameter>
    <!--MinHCalEndCapHitsForTiming-->
    <parameter name="MinHCalEndCapHitsForTiming" type="int">5 </parameter>
    <!--MinMomentumForClusterLessPfos-->
    <parameter name="MinMomentumForClusterLessPfos" type="float">0.5 </parameter>
    <!--MinPtForClusterLessPfos-->
    <parameter name="MinPtForClusterLessPfos" type="float">0.5 </parameter>
    <!--MinimumEnergyForNeutronTiming-->
    <parameter name="MinimumEnergyForNeutronTiming" type="float">1 </parameter>
    <!--Monitoring-->
    <parameter name="Monitoring" type="int">0 </parameter>
    <!--MonitoringPfoEnergyToDisplay-->
    <parameter name="MonitoringPfoEnergyToDisplay" type="float">1 </parameter>
    <!--NeutralFarForwardLooseTimingCut-->
    <parameter name="NeutralFarForwardLooseTimingCut" type="float">2 </parameter>
    <!--NeutralFarForwardTightTimingCut-->
    <parameter name="NeutralFarForwardTightTimingCut" type="float">1 </parameter>
    <!--NeutralHadronBarrelPtCutForLooseTiming-->
    <parameter name="NeutralHadronBarrelPtCutForLooseTiming" type="float">3.5 </parameter>
    <!--NeutralHadronLooseTimingCut-->
    <parameter name="NeutralHadronLooseTimingCut" type="float">2.5 </parameter>
    <!--NeutralHadronPtCut-->
    <parameter name="NeutralHadronPtCut" type="float">0 </parameter>
    <!--NeutralHadronPtCutForLooseTiming-->
    <parameter name="NeutralHadronPtCutForLooseTiming" type="float">8 </parameter>
    <!--NeutralHadronTightTimingCut-->
    <parameter name="NeutralHadronTightTimingCut" type="float">1.5 </parameter>
    <!--PhotonFarForwardLooseTimingCut-->
    <parameter name="PhotonFarForwardLooseTimingCut" type="float">2 </parameter>
    <!--PhotonFarForwardTightTimingCut-->
    <parameter name="PhotonFarForwardTightTimingCut" type="float">1 </parameter>
    <!--PhotonLooseTimingCut-->
    <parameter name="PhotonLooseTimingCut" type="float">2 </parameter>
    <!--PhotonPtCut-->
    <parameter name="PhotonPtCut" type="float">0 </parameter>
    <!--PhotonPtCutForLooseTiming-->
    <parameter name="PhotonPtCutForLooseTiming" type="float">4 </parameter>
    <!--PhotonTightTimingCut-->
    <parameter name="PhotonTightTimingCut" type="float">1 </parameter>
    <!--PtCutForTightTiming-->
    <parameter name="PtCutForTightTiming" type="float">0.75 </parameter>
    <!--Selected pfo collection name-->
    <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">SelectedPandoraPFOs </parameter>
    <!--UseClusterLessPfos-->
    <parameter name="UseClusterLessPfos" type="int">1 </parameter>
    <!--UseNeutronTiming-->
    <parameter name="UseNeutronTiming" type="int">0 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">MESSAGE </parameter>

    <processor name="CLICPfoSelectorDefault_HE" type="CLICPfoSelector">
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle"> SelectedPandoraPFOs </parameter>
    </processor>

    <processor name="CLICPfoSelectorLoose_HE" type="CLICPfoSelector">
      <!--Selects Pfos from full PFO list using timing cuts-->
      <!--ChargedPfoNegativeLooseTimingCut-->
      <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-2.0</parameter>
      <!--ChargedPfoNegativeTightTimingCut-->
      <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-2.0</parameter>
      <!-- ClusterLessPfoTrackTimeCut -->
      <parameter name = "ClusterLessPfoTrackTimeCut" type="float">1000.</parameter>
      <!--MinMomentumForClusterLessPfos-->
      <parameter name="MinMomentumForClusterLessPfos" type="float">0.0 </parameter>
      <!--MaxMomentumForClusterLessPfos-->
      <parameter name="MinPtForClusterLessPfos" type="float">0.25 </parameter>
      <!--MinimumEnergyForNeutronTiming-->
      <!--NeutralFarForwardLooseTimingCut-->
      <parameter name="NeutralFarForwardLooseTimingCut" type="float">2.5 </parameter>
      <!--NeutralFarForwardTightTimingCut-->
      <parameter name="NeutralFarForwardTightTimingCut" type="float">1.5 </parameter>
      <!--PhotonLooseTimingCut-->
      <parameter name="PhotonLooseTimingCut" type="float">2. </parameter>
      <!--PhotonTightTimingCut-->
      <parameter name="PhotonTightTimingCut" type="float">2. </parameter>
      <!--Selected pfo collection name-->
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">LooseSelectedPandoraPFOs </parameter>
      <parameter name="Monitoring" type="int">0</parameter>
    </processor>

    <processor name="CLICPfoSelectorTight_HE" type="CLICPfoSelector">
      <!--Selects Pfos from full PFO list using timing cuts-->
      <!--ChargedPfoLooseTimingCut-->
      <parameter name="ChargedPfoLooseTimingCut" type="float">2.0 </parameter>
      <!--ChargedPfoNegativeLooseTimingCut-->
      <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-0.5 </parameter>
      <!--ChargedPfoNegativeTightTimingCut-->
      <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-0.25 </parameter>
      <!--ChargedPfoTightTimingCut-->
      <parameter name="ChargedPfoTightTimingCut" type="float">1.0 </parameter>
      <!--FarForwardCosTheta-->
      <parameter name="FarForwardCosTheta" type="float">0.95 </parameter>
      <!--MaxMomentumForClusterLessPfos-->
      <parameter name="MaxMomentumForClusterLessPfos" type="float">1.5 </parameter>
      <!--MinPtForClusterLessPfos-->
      <parameter name="MinPtForClusterLessPfos" type="float">1.0 </parameter>
      <!--NeutralFarForwardLooseTimingCut-->
      <parameter name="NeutralFarForwardLooseTimingCut" type="float">1.5 </parameter>
      <!--NeutralHadronPtCut-->
      <parameter name="NeutralHadronPtCut" type="float">0.5 </parameter>
      <!--PhotonPtCut-->
      <parameter name="PhotonPtCut" type="float">0.2 </parameter>
      <!--PtCutForTightTiming-->
      <parameter name="PtCutForTightTiming" type="float">1.0 </parameter>
      <!--Selected pfo collection name-->
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">TightSelectedPandoraPFOs </parameter>
      <!--UseClusterLessPfos-->
      <parameter name="UseClusterLessPfos" type="int">0 </parameter>
      <parameter name="Monitoring" type="int">0</parameter>
    </processor>

    <processor name="CLICPfoSelectorDefault_LE" type="CLICPfoSelector">
      <!--Selects Pfos from full PFO list using timing cuts-->
      <!--Selected pfo collection name-->
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">
        LE_SelectedPandoraPFOs
      </parameter>
      <!-- <parameter name="ChargedPfoPtCutForTightTiming" type="float">1.0</parameter> -->
      <!-- <parameter name="NeutralHadronPtCutForTightTiming" type="float">1.0</parameter> -->
      <!-- <parameter name="PhotonPtCutForTightTiming" type="float">1.0</parameter> -->
      <parameter name="NeutralHadronPtCut" type="float">0.0</parameter>
      <parameter name="NeutralHadronPtCutForLooseTiming" type="float">2.0</parameter>
      <parameter name="NeutralHadronLooseTimingCut" type="float">5.0</parameter>
      <parameter name="NeutralHadronTightTimingCut" type="float">2.5</parameter>
      <parameter name="PhotonPtCut" type="float">0.0</parameter>
      <parameter name="PhotonPtCutForLooseTiming" type="float">2.0</parameter>
      <parameter name="PhotonLooseTimingCut" type="float">5.0</parameter>
      <parameter name="PhotonTightTimingCut" type="float">1.0</parameter>
      <parameter name="ChargedPfoPtCut" type="float">0.0</parameter>
      <parameter name="ChargedPfoPtCutForLooseTiming" type="float">4.0</parameter>
      <parameter name="ChargedPfoLooseTimingCut" type="float">10.0</parameter>
      <parameter name="ChargedPfoTightTimingCut" type="float">3.0</parameter>
      <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-5.0</parameter>
      <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-2.0</parameter>
      <parameter name="ClusterLessPfoTrackTimeCut" type="float">10.</parameter>
      <parameter name="MinMomentumForClusterLessPfos" type="float">0.0 </parameter>
      <parameter name="MaxMomentumForClusterLessPfos" type="float">5.0 </parameter>
      <parameter name="MinPtForClusterLessPfos" type="float">0.0 </parameter>
      <parameter name="NeutralFarForwardLooseTimingCut" type="float">4.0 </parameter>
      <parameter name="NeutralFarForwardTightTimingCut" type="float">2.0 </parameter>
      <parameter name="HCalBarrelLooseTimingCut" type="float">5 </parameter>
      <parameter name="HCalBarrelTightTimingCut" type="float">2.5 </parameter>
    </processor>

    <processor name="CLICPfoSelectorLoose_LE" type="CLICPfoSelector">
      <!--Selects Pfos from full PFO list using timing cuts-->
      <!--Input PFO Collection-->
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">
        LE_LooseSelectedPandoraPFOs
      </parameter>
      <parameter name="NeutralHadronPtCut" type="float">0.0</parameter>
      <!-- <parameter name="NeutralHadronPtCutForTightTiming" type="float">0.75</parameter> -->
      <!-- <parameter name="PhotonPtCutForTightTiming" type="float">0.75</parameter> -->
      <!-- <parameter name="ChargedPfoPtCutForTightTiming" type="float">1.0</parameter> -->
      <parameter name="NeutralHadronPtCutForLooseTiming" type="float">2.0</parameter>
      <parameter name="NeutralHadronLooseTimingCut" type="float">10.0</parameter>
      <parameter name="NeutralHadronTightTimingCut" type="float">5.0</parameter>
      <parameter name="PhotonPtCut" type="float">0.0</parameter>
      <parameter name="PhotonPtCutForLooseTiming" type="float">2.0</parameter>
      <parameter name="PhotonLooseTimingCut" type="float">10.0</parameter>
      <parameter name="PhotonTightTimingCut" type="float">2.5</parameter>
      <parameter name="ChargedPfoPtCut" type="float">0.0</parameter>
      <parameter name="ChargedPfoPtCutForLooseTiming" type="float">4.0</parameter>
      <parameter name="ChargedPfoLooseTimingCut" type="float">10.0</parameter>
      <parameter name="ChargedPfoTightTimingCut" type="float">5.0</parameter>
      <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-20.0</parameter>
      <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-20.0</parameter>
      <parameter name="ClusterLessPfoTrackTimeCut" type="float">50.</parameter>
      <parameter name="MinMomentumForClusterLessPfos" type="float">0.0 </parameter>
      <parameter name="MaxMomentumForClusterLessPfos" type="float">5.0 </parameter>
      <parameter name="MinPtForClusterLessPfos" type="float">0.0 </parameter>
      <parameter name="NeutralFarForwardLooseTimingCut" type="float">10.0 </parameter>
      <parameter name="NeutralFarForwardTightTimingCut" type="float">5.0 </parameter>
      <parameter name="HCalBarrelLooseTimingCut" type="float">10 </parameter>
      <parameter name="HCalBarrelTightTimingCut" type="float">5 </parameter>
    </processor>

    <processor name="CLICPfoSelectorTight_LE" type="CLICPfoSelector">
      <!--Selects Pfos from full PFO list using timing cuts-->
      <!--Input PFO Collection-->
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">
        LE_TightSelectedPandoraPFOs
      </parameter>
      <parameter name = "NeutralHadronPtCut" type="float">0.0</parameter>
      <!-- <parameter name = "NeutralHadronPtCutForTightTiming" type="float">1.0</parameter> -->
      <!-- <parameter name = "PhotonPtCutForTightTiming" type="float">1.0</parameter> -->
      <!-- <parameter name = "ChargedPfoPtCutForTightTiming" type="float">1.5</parameter> -->
      <parameter name="NeutralHadronPtCutForLooseTiming" type="float">3.0</parameter>
      <parameter name="NeutralHadronLooseTimingCut" type="float">4.0</parameter>
      <parameter name="NeutralHadronTightTimingCut" type="float">2.0</parameter>
      <parameter name="PhotonPtCut" type="float">0.0</parameter>
      <parameter name="PhotonPtCutForLooseTiming" type="float">2.0</parameter>
      <parameter name="PhotonLooseTimingCut" type="float">1.0</parameter>
      <parameter name="PhotonTightTimingCut" type="float">1.0</parameter>
      <parameter name="ChargedPfoPtCut" type="float">0.0</parameter>
      <parameter name="ChargedPfoPtCutForLooseTiming" type="float">3.0</parameter>
      <parameter name="ChargedPfoLooseTimingCut" type="float">4.0</parameter>
      <parameter name="ChargedPfoTightTimingCut" type="float">2.0</parameter>
      <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-2.0</parameter>
      <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-1.0</parameter>
      <parameter name="ClusterLessPfoTrackTimeCut" type="float">10.</parameter>
      <parameter name="MinMomentumForClusterLessPfos" type="float">0.0 </parameter>
      <parameter name="MaxMomentumForClusterLessPfos" type="float">5.0 </parameter>
      <parameter name="MinPtForClusterLessPfos" type="float">0.75 </parameter>
      <parameter name="NeutralFarForwardLooseTimingCut" type="float">2.0 </parameter>
      <parameter name="NeutralFarForwardTightTimingCut" type="float">2.0 </parameter>
      <parameter name="HCalBarrelLooseTimingCut" type="float">4 </parameter>
      <parameter name="HCalBarrelTightTimingCut" type="float">2 </parameter>
    </processor>

  </group>

  <!-- ========== Rename collection (to have same output collection name as FastJet ================================== -->

  <processor name="RenameCollection" type="MergeCollections">
    <parameter name="CollectionParameterIndex" type="int">0 </parameter>
    <parameter name="InputCollectionIDs" type="IntVec"> </parameter>
    <parameter name="InputCollections" type="StringVec"> PandoraPFOs </parameter>
    <parameter name="OutputCollection" type="string"> PFOsFromJets </parameter>
  </processor>

  <!-- ========== Jet clustering for gg->hadrons removal ================================== -->
  <processor name="MyFastJetProcessor" type="FastJetProcessor">
    <parameter name="algorithm" type="StringVec"> ValenciaPlugin 1.2 1.0 0.7 </parameter>
    <parameter name="clusteringMode" type="StringVec"> ExclusiveNJets 2 </parameter>
    <parameter name="recombinationScheme" type="string">E_scheme </parameter>
    <parameter name="recParticleIn" type="string" lcioInType="ReconstructedParticle"> TightSelectedPandoraPFOs </parameter>
    <parameter name="jetOut" type="string" lcioOutType="ReconstructedParticle">JetsAfterGamGamRemoval </parameter>
    <parameter name="storeParticlesInJets" type="boolean" > true </parameter>
    <parameter name="recParticleOut" type="string" lcioOutType="ReconstructedParticle"> PFOsFromJets </parameter>
  </processor>

  <!-- ========== Vertexing for flavour tagging (constrained) and vertex resolutions (unconstrained) ================================== -->
  <group name="Vertexing">
    <parameter name="Algorithms" type="stringVec"> PrimaryVertexFinder BuildUpVertex </parameter>
    <parameter name="ReadSubdetectorEnergies" type="int" value="0"/> <!-- true for ILD -->
    <parameter name="UpdateVertexRPDaughters" type="int" value="0"/> <!-- false for non-updative PandoraPFOs -->
    <parameter name="TrackHitOrdering" type="int" value="2"/> <!-- Track hit ordering: 0=ILD-LOI (default), 1=ILD-DBD, 2=CLICdet -->
    <parameter name="PrintEventNumber" type="int" value="1"/> <!-- 0 for not printing event number, n for printing every n events -->
    <!-- specify input collection names -->
    <parameter name="UseMCP" type="int" value="0" /> <!-- MC info not used -->
    <parameter name="MCPCollection" type="string" value="MCParticle" />
    <parameter name="MCPFORelation" type="string" value="RecoMCTruthLink" />
    <parameter name="MagneticField" type="float" value="4.0"/> <!-- CLIC B field -->
    <parameter name="BeamSizeX" type="float" value="40.E-6"/> <!-- CLIC beam sizes from CDR -->
    <parameter name="BeamSizeY" type="float" value="1.0E-6"/>
    <parameter name="BeamSizeZ" type="float" value="44E-3"/>
    <!-- parameters for primary vertex finder -->
    <parameter name="PrimaryVertexFinder.BeamspotSmearing" type="boolean" value="false" />
    <parameter name="PrimaryVertexFinder.TrackMaxD0" type="double" value="20." />
    <parameter name="PrimaryVertexFinder.TrackMaxZ0" type="double" value="20." />
    <parameter name="PrimaryVertexFinder.TrackMaxInnermostHitRadius" type="double" value="61" /><!-- obsolete? -->
    <parameter name="PrimaryVertexFinder.TrackMinVtxFtdHits" type="int" value="1" />
    <parameter name="PrimaryVertexFinder.Chi2Threshold" type="double" value="25." />
    <!-- irrelevant because of TrackMinVtxFtdHits = 1 -->
    <parameter name="PrimaryVertexFinder.TrackMinFtdHits" type="int" value="999999" />
    <parameter name="PrimaryVertexFinder.TrackMinVxdHits" type="double" value="999999" />
    <!-- No tracks with hits only in the main silicon tracker -->
    <parameter name="PrimaryVertexFinder.TrackMinTpcHits" type="int" value="999999" />
    <parameter name="PrimaryVertexFinder.TrackMinTpcHitsMinPt" type="double" value="999999" />

    <!-- parameters for secondary vertex finder -->
    <parameter name="BuildUpVertex.TrackMaxD0" type="double" value="10." />
    <parameter name="BuildUpVertex.TrackMaxZ0" type="double" value="20." />
    <parameter name="BuildUpVertex.TrackMinPt" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMaxD0Err" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMaxZ0Err" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMinTpcHits" type="int" value="1" />
    <parameter name="BuildUpVertex.TrackMinTpcHitsMinPt" type="double" value="999999" /><!--FIXME-->
    <parameter name="BuildUpVertex.TrackMinFtdHits" type="int" value="1" />
    <parameter name="BuildUpVertex.TrackMinVxdHits" type="int" value="1" />
    <parameter name="BuildUpVertex.TrackMinVxdFtdHits" type="int" value="1" />
    <parameter name="BuildUpVertex.PrimaryChi2Threshold" type="double" value="25." />
    <parameter name="BuildUpVertex.SecondaryChi2Threshold" type="double" value="9." />
    <parameter name="BuildUpVertex.MassThreshold" type="double" value="10." />
    <parameter name="BuildUpVertex.MinDistFromIP" type="double" value="0.3" />
    <parameter name="BuildUpVertex.MaxChi2ForDistOrder" type="double" value="1.0" />
    <parameter name="BuildUpVertex.AssocIPTracks" type="int" value="1" />
    <parameter name="BuildUpVertex.AssocIPTracksMinDist" type="double" value="0." />
    <parameter name="BuildUpVertex.AssocIPTracksChi2RatioSecToPri" type="double" value="2.0" />
    <parameter name="BuildUpVertex.UseV0Selection" type="int" value="1" />
    <!-- Disable AVF -->
    <parameter name="BuildUpVertex.UseAVF" type="boolean" value="false" />
    <parameter name="BuildUpVertex.AVFTemperature" type="double" value="5.0" />

    <!-- Primary and Secondary vertex finder ================================================ -->
    <processor name="VertexFinder" type="LcfiplusProcessor">
      <!-- run primary and secondary vertex finders -->
      <parameter name="PFOCollection" type="string" value="PFOsFromJets" />
      <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertices" />
      <parameter name="BuildUpVertexCollectionName" type="string" value="BuildUpVertices" />
      <parameter name="BuildUpVertex.V0VertexCollectionName" type="string" value="BuildUpVertices_V0" />
      <parameter name="PrimaryVertexFinder.BeamspotConstraint" type="bool">1 </parameter>
    </processor>  

    <!-- Primary and Secondary vertex finder for resolutions ================================= --> 
    <processor name="VertexFinderUnconstrained" type="LcfiplusProcessor">
      <!-- run primary and secondary vertex finders -->
      <parameter name="PFOCollection" type="string" value="TightSelectedPandoraPFOs" />
      <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertices_res" />
      <parameter name="BuildUpVertexCollectionName" type="string" value="BuildUpVertices_res" />
      <parameter name="BuildUpVertex.V0VertexCollectionName" type="string" value="BuildUpVertices_V0_res" />
      <parameter name="PrimaryVertexFinder.BeamspotConstraint" type="bool">0 </parameter>
    </processor>
  </group>

  <processor name="JetClusteringAndRefiner" type="LcfiplusProcessor">
    <parameter name="Algorithms" type="stringVec"> JetClustering JetVertexRefiner </parameter>
    <!-- general parameters -->
    <parameter name="PFOCollection" type="string" value="PFOsFromJets" /> <!-- input PFO collection -->
    <parameter name="UseMCP" type="int" value="0" /> <!-- MC info not used -->
    <parameter name="MCPCollection" type="string" value="MCParticle" />
    <parameter name="MCPFORelation" type="string" value="RecoMCTruthLink" />
    <parameter name="ReadSubdetectorEnergies" type="int" value="0"/> <!-- true for ILD -->
    <parameter name="UpdateVertexRPDaughters" type="int" value="0"/> <!-- false for non-updative PandoraPFOs -->
    <parameter name="TrackHitOrdering" type="int" value="2"/> <!-- Track hit ordering: 0=ILD-LOI (default), 1=ILD-DBD, 2=CLICdet -->
    <parameter name="PrintEventNumber" type="int" value="1"/> <!-- 0 for not printing event number, n for printing every n events -->
    <parameter name="MagneticField" type="float" value="4.0"/> <!-- ILC and CLIC detectors have different values -->
    <!-- jet clustering parameters -->
    <parameter name="JetClustering.PrimaryVertexCollectionName" type="string" value="PrimaryVertices" /> <!-- Needed for post 00.06.09 -->
    <parameter name="JetClustering.InputVertexCollectionName" type="string" value="BuildUpVertices" /> <!-- vertex collections to be used in JC -->
    <parameter name="JetClustering.OutputJetCollectionName" type="stringVec" value="VertexJets" /> <!-- output collection name, may be multiple -->
    <parameter name="JetClustering.NJetsRequested" type="intVec" value="2" /> <!-- Multiple NJets can be specified -->
    <parameter name="JetClustering.YCut" type="doubleVec" value="0." /> <!-- specify 0 if not used -->
    <parameter name="JetClustering.UseMuonID" type="int" value="1" /> <!-- jet-muon ID for jet clustering -->
    <parameter name="JetClustering.VertexSelectionMinimumDistance" type="double" value="0.3" /> <!-- in mm -->
    <parameter name="JetClustering.VertexSelectionMaximumDistance" type="double" value="30." /> <!-- in mm -->
    <parameter name="JetClustering.VertexSelectionK0MassWidth" type="double" value="0.02" /> <!-- in GeV -->
    <parameter name="JetClustering.YAddedForJetVertexVertex" type="double" value="100"/> <!-- add penalty for combining vertices -->
    <parameter name="JetClustering.YAddedForJetLeptonVertex" type="double" value="100"/> <!-- add penalty for combining lepton and vertex -->
    <parameter name="JetClustering.YAddedForJetLeptonLepton" type="double" value="100"/> <!-- add penalty for combining leptons -->

    <parameter name="JetClustering.JetAlgorithm" type="string" value="ValenciaVertex" /> <!-- jet algorithm -->
    <parameter name="JetClustering.UseBeamJets" type="int" value="1" /> <!-- beam jet rejection -->
    <parameter name="JetClustering.AlphaParameter" type="double" value="1.0" />
    <parameter name="JetClustering.BetaParameter" type="double" value="1.0" />
    <parameter name="JetClustering.GammaParameter" type="double" value="1.0" />
    <parameter name="JetClustering.RParameter" type="double" value="1.0" />
    <parameter name="JetClustering.OutputJetStoresVertex" type="int" value="0" />
    <parameter name="JetClustering.YAddedForJetVertexLepton" type="int" value="0" />
    <parameter name="JetClustering.MuonIDExternal" type="int" value="0" />
    <parameter name="JetClustering.MuonIDMinimumEnergy" type="double" value="5.0" />
    <parameter name="JetClustering.MuonIDMinimumEnergy" type="int" value="0" />
    <parameter name="JetClustering.MuonIDMinimumD0Significance" type="double" value="5.0" />
    <parameter name="JetClustering.MuonIDMinimumZ0Significance" type="double" value="5.0" />
    <parameter name="JetClustering.MuonIDMaximum3DImpactParameter" type="double" value="5.0" />
    <parameter name="JetClustering.MuonIDMinimumProbability" type="double" value="0.5" />
    <parameter name="JetClustering.MaxNumberOfJetsForYThreshold" type="int" value="10" />

    <!-- vertex refiner parameters -->
    <parameter name="JetVertexRefiner.InputJetCollectionName" type="string" value="VertexJets" />
    <parameter name="JetVertexRefiner.OutputJetCollectionName" type="string" value="RefinedVertexJets" />
    <parameter name="JetVertexRefiner.PrimaryVertexCollectionName" type="string" value="PrimaryVertices" />
    <parameter name="JetVertexRefiner.InputVertexCollectionName" type="string" value="BuildUpVertices" />
    <parameter name="JetVertexRefiner.V0VertexCollectionName" type="string" value="BuildUpVertices_V0" />
    <parameter name="JetVertexRefiner.OutputVertexCollectionName" type="string" value="RefinedVertices" />
    <parameter name="JetVertexRefiner.MinPosSingle" type="double" value="0.3" />
    <parameter name="JetVertexRefiner.MaxPosSingle" type="double" value="30." />
    <parameter name="JetVertexRefiner.MinEnergySingle" type="double" value="1." />
    <parameter name="JetVertexRefiner.MaxAngleSingle" type="double" value="0.5" />
    <parameter name="JetVertexRefiner.MaxSeparationPerPosSingle" type="double" value="0.1" />
    <parameter name="JetVertexRefiner.mind0sigSingle" type="double" value="5." />
    <parameter name="JetVertexRefiner.minz0sigSingle" type="double" value="5." />
    <parameter name="JetVertexRefiner.OneVertexProbThreshold" type="double" value="0.001" />
    <parameter name="JetVertexRefiner.MaxCharmFlightLengthPerJetEnergy" type="double" value="0.1" />
    <parameter name="JetVertexRefiner.useBNess" type="bool" value="0" />
    <parameter name="JetVertexRefiner.BNessCut" type="double" value="-0.80" />
    <parameter name="JetVertexRefiner.BNessCutE1" type="double" value="-0.15" />
  </processor>

  <processor name="Output_REC" type="LCIOOutputProcessor">
    <!--   standard output: full reconstruction keep all collections -->
    <parameter name="LCIOOutputFile" type="string"> Output_REC.slcio </parameter>
    <parameter name="FullSubsetCollections" type="StringVec"> EfficientMCParticles InefficientMCParticles </parameter>
    <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
    <parameter name="Verbosity" type="string">WARNING </parameter>
  </processor>

  <processor name="Output_DST" type="LCIOOutputProcessor">
    <!--   dst output: keep only collections for analysis -->
    <parameter name="LCIOOutputFile" type="string"> Output_DST.slcio </parameter>
    <parameter name="FullSubsetCollections" type="StringVec">
      EfficientMCParticles
      InefficientMCParticles
      MCPhysicsParticles
    </parameter>
    <parameter name="DropCollectionTypes" type="StringVec">
      MCParticle
      LCRelation
      SimCalorimeterHit
      CalorimeterHit
      SimTrackerHit
      TrackerHit
      TrackerHitPlane
      Track
      ReconstructedParticle
      LCFloatVec
      Clusters
    </parameter>
    <parameter name="KeepCollectionNames" type="StringVec">
      MCParticlesSkimmed
      MCPhysicsParticles
      RecoMCTruthLink
      SiTracks
      SiTracks_Refitted
      PandoraClusters
      PandoraPFOs
      SelectedPandoraPFOs
      LooseSelectedPandoraPFOs
      TightSelectedPandoraPFOs
      LE_SelectedPandoraPFOs
      LE_LooseSelectedPandoraPFOs
      LE_TightSelectedPandoraPFOs
      LumiCalClusters
      LumiCalRecoParticles
      BeamCalClusters
      BeamCalRecoParticles
      MergedRecoParticles
      MergedClusters
      RefinedVertexJets
      RefinedVertexJets_rel
      RefinedVertexJets_vtx
      RefinedVertexJets_vtx_RP
      BuildUpVertices
      BuildUpVertices_res
      BuildUpVertices_RP
      BuildUpVertices_res_RP
      BuildUpVertices_V0
      BuildUpVertices_V0_res
      BuildUpVertices_V0_RP
      BuildUpVertices_V0_res_RP
      PrimaryVertices
      PrimaryVertices_res
      PrimaryVertices_RP
      PrimaryVertices_res_RP
      RefinedVertices
      RefinedVertices_RP
    </parameter>
    <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
    <parameter name="Verbosity" type="string">WARNING </parameter>
  </processor>

</marlin>
